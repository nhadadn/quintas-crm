import*as e from"crypto";import{EventEmitter as t}from"events";import*as n from"http";import*as r from"https";import{exec as o}from"child_process";class s{computeHMACSignature(e,t){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,t){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class i extends Error{}class a extends s{computeHMACSignature(t,n){return e.createHmac("sha256",n).update(t,"utf8").digest("hex")}async computeHMACSignatureAsync(e,t){return await this.computeHMACSignature(e,t)}async computeSHA256Async(t){return new Uint8Array(await e.createHash("sha256").update(t).digest())}}class c{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,t,n,r,o,s,i,a){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(c.TIMEOUT_ERROR_CODE);return e.code=c.TIMEOUT_ERROR_CODE,e}}c.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],c.TIMEOUT_ERROR_CODE="ETIMEDOUT";class u{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}const l=n.default||n,d=r.default||r,h=new l.Agent({keepAlive:!0}),p=new d.Agent({keepAlive:!0});class m extends c{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,t,n,r,o,s,i,a){const u="http"===i;let m=this._agent;m||(m=u?h:p);return new Promise((i,h)=>{const p=(u?l:d).request({host:e,port:t,path:n,method:r,agent:m,headers:o,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});p.setTimeout(a,()=>{p.destroy(c.makeTimeoutError())}),p.on("response",e=>{i(new f(e))}),p.on("error",e=>{h(e)}),p.once("socket",e=>{e.connecting?e.once(u?"connect":"secureConnect",()=>{p.write(s),p.end()}):(p.write(s),p.end())})})}}class f extends u{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,t)=>{let n="";this._res.setEncoding("utf8"),this._res.on("data",e=>{n+=e}),this._res.once("end",()=>{try{e(JSON.parse(n))}catch(e){t(e)}})})}}const v=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function _(e){return e&&"object"==typeof e&&v.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function g(e,t){return function(e){const t=[];function n(e,r){if(void 0!==r)if(null===r||"object"!=typeof r||r instanceof Date)t.push(y(e)+"="+y(function(e){if(e instanceof Date)return Math.floor(e.getTime()/1e3).toString();if(null===e)return"";return String(e)}(r)));else if(Array.isArray(r))for(let t=0;t<r.length;t++)void 0!==r[t]&&n(e+"["+t+"]",r[t]);else for(const t of Object.keys(r))n(e+"["+t+"]",r[t])}if("object"==typeof e&&null!==e)for(const t of Object.keys(e))n(t,e[t]);return t.join("&")}(e)}function y(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27").replace(/%5B/g,"[").replace(/%5D/g,"]")}const P=(()=>{const e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{const n=t.replace(/["\n\r\u2028\u2029]/g,t=>e[t]);return e=>n.replace(/\{([\s\S]+?)\}/g,(t,n)=>{const r=e[n];return["number","string","boolean"].includes(typeof r)?encodeURIComponent(r):""})}})();function T(e){if(!Array.isArray(e)||!e[0]||"object"!=typeof e[0])return{};if(!_(e[0]))return e.shift();const t=Object.keys(e[0]),n=t.filter(e=>v.includes(e));return n.length>0&&n.length!==t.length&&O(`Options found in arguments (${n.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function E(e){const t={host:null,headers:{},settings:{},streaming:!1};if(e.length>0){const n=e[e.length-1];if("string"==typeof n)t.authenticator=k(e.pop());else if(_(n)){const n=Object.assign({},e.pop()),r=Object.keys(n).filter(e=>!v.includes(e));if(r.length&&O(`Invalid options found (${r.join(", ")}); ignoring.`),n.apiKey&&(t.authenticator=k(n.apiKey)),n.idempotencyKey&&(t.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(t.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(t.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");t.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(t.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(t.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(t.settings.timeout=n.timeout),n.host&&(t.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if("function"!=typeof n.authenticator)throw new Error("The authenticator must be a function receiving a request as the first parameter.");t.authenticator=n.authenticator}n.additionalHeaders&&(t.headers=n.additionalHeaders),n.streaming&&(t.streaming=!0)}}return t}function b(e){if("object"!=typeof e)throw new Error("Argument must be an object");return Object.keys(e).reduce((t,n)=>(null!=e[n]&&(t[n]=e[n]),t),{})}function w(e,t){return t?e.then(e=>{setTimeout(()=>{t(null,e)},0)},e=>{setTimeout(()=>{t(e,null)},0)}):e}function S(e){return"OAuth"===e?"oauth":e[0].toLowerCase()+e.substring(1)}function O(e){return"function"!=typeof process.emitWarning?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function x(e,t,n){if(!Number.isInteger(t)){if(void 0!==n)return n;throw new Error(`${e} must be an integer`)}return t}function k(e){const t=t=>(t.headers.Authorization="Bearer "+e,Promise.resolve());return t._apiKey=e,t}function z(e,t){return this[e]instanceof Date?Math.floor(this[e].getTime()/1e3).toString():t}function A(e){return e&&e.startsWith("/v2")?"v2":"v1"}function C(e){return Array.isArray(e)?e.join(", "):String(e)}function I(e){return Object.entries(e).map(([e,t])=>[e,C(t)])}class G extends c{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=G.makeFetchWithAbortTimeout(e):this._fetchFn=G.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(t,n,r)=>{let o;const s=new Promise((e,t)=>{o=setTimeout(()=>{o=null,t(c.makeTimeoutError())},r)}),i=e(t,n);return Promise.race([i,s]).finally(()=>{o&&clearTimeout(o)})}}static makeFetchWithAbortTimeout(e){return async(t,n,r)=>{const o=new AbortController;let s=setTimeout(()=>{s=null,o.abort(c.makeTimeoutError())},r);try{return await e(t,Object.assign(Object.assign({},n),{signal:o.signal}))}catch(e){throw"AbortError"===e.name?c.makeTimeoutError():e}finally{s&&clearTimeout(s)}}}getClientName(){return"fetch"}async makeRequest(e,t,n,r,o,s,i,a){const c=new URL(n,`${"http"===i?"http":"https"}://${e}`);c.port=t;const u=s||("POST"==r||"PUT"==r||"PATCH"==r?"":void 0),l=await this._fetchFn(c.toString(),{method:r,headers:I(o),body:u},a);return new R(l)}}class R extends u{constructor(e){super(e.status,R._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const t={};for(const n of e){if(!Array.isArray(n)||2!=n.length)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[n[0]]=n[1]}return t}}class $ extends s{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw new i("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,t){const n=new TextEncoder,r=await this.subtleCrypto.importKey("raw",n.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=await this.subtleCrypto.sign("hmac",r,n.encode(e)),s=new Uint8Array(o),i=new Array(s.length);for(let e=0;e<s.length;e++)i[e]=N[s[e]];return i.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const N=new Array(256);for(let e=0;e<N.length;e++)N[e]=e.toString(16).padStart(2,"0");class j{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}secureCompare(e,t){if(e.length!==t.length)return!1;const n=e.length;let r=0;for(let o=0;o<n;++o)r|=e.charCodeAt(o)^t.charCodeAt(o);return 0===r}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new G(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new $(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}const D=e=>{switch(e.type){case"card_error":return new M(e);case"invalid_request_error":return new U(e);case"api_error":return new Z(e);case"authentication_error":return new L(e);case"rate_limit_error":return new J(e);case"idempotency_error":return new K(e);case"invalid_grant":return new W(e);default:return new Y(e)}},q=e=>"temporary_session_expired"===e.type?new X(e):"invalid_fields"===e.code?new U(e):D(e);class F extends Error{constructor(e={},t=null){var n;super(e.message),this.type=t||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=null!==(n=e.message)&&void 0!==n?n:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}F.generate=D;class M extends F{constructor(e={}){super(e,"StripeCardError")}}class U extends F{constructor(e={}){super(e,"StripeInvalidRequestError")}}class Z extends F{constructor(e={}){super(e,"StripeAPIError")}}class L extends F{constructor(e={}){super(e,"StripeAuthenticationError")}}class H extends F{constructor(e={}){super(e,"StripePermissionError")}}class J extends F{constructor(e={}){super(e,"StripeRateLimitError")}}class V extends F{constructor(e={}){super(e,"StripeConnectionError")}}class B extends F{constructor(e,t,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=t}}class K extends F{constructor(e={}){super(e,"StripeIdempotencyError")}}class W extends F{constructor(e={}){super(e,"StripeInvalidGrantError")}}class Y extends F{constructor(e={}){super(e,"StripeUnknownError")}}class X extends F{constructor(e={}){super(e,"TemporarySessionExpiredError")}}var Q=Object.freeze({__proto__:null,StripeAPIError:Z,StripeAuthenticationError:L,StripeCardError:M,StripeConnectionError:V,StripeError:F,StripeIdempotencyError:K,StripeInvalidGrantError:W,StripeInvalidRequestError:U,StripePermissionError:H,StripeRateLimitError:J,StripeSignatureVerificationError:B,StripeUnknownError:Y,TemporarySessionExpiredError:X,generateV1Error:D,generateV2Error:q});class ee extends F{}class te{constructor(e,t){this._stripe=e,this._maxBufferedRequestMetric=t}_normalizeStripeContext(e,t){return e?e.toString()||null:(null==t?void 0:t.toString())||null}_addHeadersDirectlyToObject(e,t){e.requestId=t["request-id"],e.stripeAccount=e.stripeAccount||t["stripe-account"],e.apiVersion=e.apiVersion||t["stripe-version"],e.idempotencyKey=e.idempotencyKey||t["idempotency-key"]}_makeResponseEvent(e,t,n){const r=Date.now(),o=r-e.request_start_time;return b({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:t,request_id:this._getRequestId(n),elapsed:o,request_start_time:e.request_start_time,request_end_time:r})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,t,n){return r=>{const o=r.getHeaders(),s=r.toStream(()=>{const n=this._makeResponseEvent(e,r.getStatusCode(),o);this._stripe._emitter.emit("response",n),this._recordRequestMetrics(this._getRequestId(o),n.elapsed,t)});return this._addHeadersDirectlyToObject(s,o),n(null,s)}}_jsonResponseHandler(e,t,n,r){return o=>{const s=o.getHeaders(),i=this._getRequestId(s),a=o.getStatusCode(),c=this._makeResponseEvent(e,a,s);this._stripe._emitter.emit("response",c),o.toJSON().then(e=>{if(e.error){let n;throw"string"==typeof e.error&&(e.error={type:e.error,message:e.error_description}),e.error.headers=s,e.error.statusCode=a,e.error.requestId=i,n=401===a?new L(e.error):403===a?new H(e.error):429===a?new J(e.error):"v2"===t?q(e.error):D(e.error),n}return e},e=>{throw new Z({message:"Invalid JSON received from the Stripe API",exception:e,requestId:s["request-id"]})}).then(e=>{this._recordRequestMetrics(i,c.elapsed,n);const t=o.getRawResponse();this._addHeadersDirectlyToObject(t,s),Object.defineProperty(e,"lastResponse",{enumerable:!1,writable:!1,value:t}),r(null,e)},e=>r(e,null))}}static _generateConnectionErrorMessage(e){return"An error occurred with our connection to Stripe."+(e>0?` Request was retried ${e} times.`:"")}static _shouldRetry(e,t,n,r){return!(!r||0!==t||!c.CONNECTION_CLOSED_ERROR_CODES.includes(r.code))||!(t>=n)&&(!e||"false"!==e.getHeaders()["stripe-should-retry"]&&("true"===e.getHeaders()["stripe-should-retry"]||(409===e.getStatusCode()||e.getStatusCode()>=500)))}_getSleepTimeInMS(e,t=null){const n=this._stripe.getInitialNetworkRetryDelay(),r=this._stripe.getMaxNetworkRetryDelay();let o=Math.min(n*Math.pow(2,e-1),r);return o*=.5*(1+Math.random()),o=Math.max(n,o),Number.isInteger(t)&&t<=60&&(o=Math.max(o,t)),1e3*o}_getMaxNetworkRetries(e={}){return void 0!==e.maxNetworkRetries&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,t,n){const r=this._getMaxNetworkRetries(t),o=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if("v2"===n){if("POST"===e||"DELETE"===e)return o()}else if("v1"===n&&"POST"===e&&r>0)return o();return null}_makeHeaders({contentType:e,contentLength:t,apiVersion:n,clientUserAgent:r,method:o,userSuppliedHeaders:s,userSuppliedSettings:i,stripeAccount:a,stripeContext:c,apiMode:u}){const l={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(u),"X-Stripe-Client-User-Agent":r,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":a,"Stripe-Context":c,"Idempotency-Key":this._defaultIdempotencyKey(o,i,u)},d="POST"==o||"PUT"==o||"PATCH"==o;return(d||t)&&(d||O(`${o} method had non-zero contentLength but no payload is expected for this verb`),l["Content-Length"]=t),Object.assign(b(l),(h=s)&&"object"==typeof h?Object.keys(h).reduce((e,t)=>(e[function(e){return e.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}(t)]=h[t],e),{}):h);var h}_getUserAgentString(e){return`Stripe/${e} NodeBindings/${this._stripe.getConstant("PACKAGE_VERSION")} ${this._stripe._appInfo?this._stripe.getAppInfoAsString():""}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,t,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)O("Request metrics buffer is full, dropping telemetry message.");else{const r={request_id:e,request_duration_ms:t};n&&n.length>0&&(r.usage=n),this._stripe._prevRequestMetrics.push(r)}}_rawRequest(e,t,n,r,o){return new Promise((s,i)=>{let a;try{const s=e.toUpperCase();if("POST"!==s&&n&&0!==Object.keys(n).length)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const i=[].slice.call([n,r]),c=T(i),u="POST"===s?Object.assign({},c):null,l=E(i),d=l.headers,h=l.authenticator;a={requestMethod:s,requestPath:t,bodyData:u,queryData:{},authenticator:h,headers:d,host:l.host,streaming:!!l.streaming,settings:{},usage:o||["raw_request"]}}catch(e){return void i(e)}const{headers:c,settings:u}=a,l=a.authenticator;this._request(a.requestMethod,a.host,t,a.bodyData,l,{headers:c,settings:u,streaming:a.streaming},a.usage,function(e,t){e?i(e):s(t)})})}_getContentLength(e){return"string"==typeof e?(new TextEncoder).encode(e).length:e.length}_request(e,t,n,r,o,s,i=[],a,u=null){var l;let d;o=null!==(l=null!=o?o:this._stripe._authenticator)&&void 0!==l?l:null;const h=A(n),p=(e,t,n,r,o)=>setTimeout(e,this._getSleepTimeInMS(r,o),t,n,r+1),m=(r,u,l)=>{const f=s.settings&&s.settings.timeout&&Number.isInteger(s.settings.timeout)&&s.settings.timeout>=0?s.settings.timeout:this._stripe.getApiField("timeout"),v={host:t||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},u),body:d,protocol:this._stripe.getApiField("protocol")};o(v).then(()=>{const t=this._stripe.getApiField("httpClient").makeRequest(v.host,v.port,v.path,v.method,v.headers,v.body,v.protocol,f),o=Date.now(),d=b({api_version:r,account:C(u["Stripe-Account"]),idempotency_key:C(u["Idempotency-Key"]),method:e,path:n,request_start_time:o}),_=l||0,g=this._getMaxNetworkRetries(s.settings||{});this._stripe._emitter.emit("request",d),t.then(e=>te._shouldRetry(e,_,g)?p(m,r,u,_,function(e){const t=Array.isArray(e)?e[0]:e;return Number(t)}(e.getHeaders()["retry-after"])):s.streaming&&e.getStatusCode()<400?this._streamingResponseHandler(d,i,a)(e):this._jsonResponseHandler(d,h,i,a)(e)).catch(e=>{if(te._shouldRetry(null,_,g,e))return p(m,r,u,_,null);{const t=e.code&&e.code===c.TIMEOUT_ERROR_CODE;return a(new V({message:t?`Request aborted due to timeout being reached (${f}ms)`:te._generateConnectionErrorMessage(_),detail:e}))}})}).catch(e=>{throw new F({message:"Unable to authenticate the request",exception:e})})},f=(t,n)=>{if(t)return a(t);d=n,this._stripe.getClientUserAgent(t=>{var r,o,i;const a=this._stripe.getApiField("version"),c=this._makeHeaders({contentType:"v2"==h?"application/json":"application/x-www-form-urlencoded",contentLength:this._getContentLength(n),apiVersion:a,clientUserAgent:t,method:e,userSuppliedHeaders:null!==(r=s.headers)&&void 0!==r?r:null,userSuppliedSettings:null!==(o=s.settings)&&void 0!==o?o:{},stripeAccount:null!==(i=s.stripeAccount)&&void 0!==i?i:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(s.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:h});m(a,c,0)})};if(u)u(e,r,s.headers,f);else{let e;e="v2"==h?r?function(e){return JSON.stringify(e,z)}(r):"":g(r||{}),f(null,e)}}}class ne{constructor(e,t,n,r){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=t,this.spec=n,this.stripeResource=r}async iterate(e){if(!e||!e.data||"number"!=typeof e.data.length)throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const t=ce(this.requestArgs);if(this.index<e.data.length){const n=t?e.data.length-1-this.index:this.index,r=e.data[n];return this.index+=1,{value:r,done:!1}}if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const t=await this.pagePromise;return this.iterate(t)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const e=await this._next();return this.promiseCache.currentPromise=null,e})();return this.promiseCache.currentPromise=e,e}}class re extends ne{getNextPage(e){const t=ce(this.requestArgs),n=function(e,t){const n=t?0:e.data.length-1,r=e.data[n],o=r&&r.id;if(!o)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return o}(e,t);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[t?"ending_before":"starting_after"]:n})}}class oe extends ne{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class se{constructor(e,t,n,r){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=t,this.spec=n,this.stripeResource=r}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const t=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(t.next_page_url),this.currentPageIterator=Promise.resolve(t.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const e=(await this.currentPageIterator).next();if(!e.done)return{done:!1,value:e.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const t=e.next();return t.done?{done:!0,value:void 0}:{done:!1,value:t.value}}}const ie=e=>{const t=(n=(...t)=>e.next(...t),function(){const e=[].slice.call(arguments),t=function(e){if(0===e.length)return;const t=e[0];if("function"!=typeof t)throw Error("The first argument to autoPagingEach, if present, must be a callback function; received "+typeof t);if(2===t.length)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(e,n){n(t(e))}}(e),r=function(e){if(e.length<2)return null;const t=e[1];if("function"!=typeof t)throw Error("The second argument to autoPagingEach, if present, must be a callback function; received "+typeof t);return t}(e);if(e.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${e}`);const o=function(e,t){return new Promise((n,r)=>{function o(r){if(r.done)return void n();const s=r.value;return new Promise(e=>{t(s,e)}).then(t=>!1===t?o({done:!0,value:void 0}):e().then(o))}e().then(o).catch(r)})}(n,t);return w(o,r)});var n;const r=function(e){return function(t,n){const r=t&&t.limit;if(!r)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(r>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");return w(new Promise((t,n)=>{const o=[];e(e=>{if(o.push(e),o.length>=r)return!1}).then(()=>{t(o)}).catch(n)}),n)}}(t),o={autoPagingEach:t,autoPagingToArray:r,next:()=>e.next(),return:()=>({}),[ae()]:()=>o};return o};function ae(){return"undefined"!=typeof Symbol&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function ce(e){return!!T([].slice.call(e)).ending_before}function ue(e,t){if(this._stripe=e,t)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=P(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=P(this.path),this.initialize(...arguments)}ue.extend=function(e){const t=this,n=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...e){t.apply(this,e)};return Object.assign(n,t),n.prototype=Object.create(t.prototype),Object.assign(n.prototype,e),n},ue.method=function(e){if(void 0!==e.path&&void 0!==e.fullPath)throw new Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){const n="function"==typeof t[t.length-1]&&t.pop();e.urlParams=function(e){const t=e.match(/\{\w+\}/g);return t?t.map(e=>e.replace(/[{}]/g,"")):[]}(e.fullPath||this.createResourcePathWithSymbols(e.path||""));const r=w(this._makeRequest(t,e,{}),n);return Object.assign(r,((e,t,n,r)=>{const o=A(n.fullPath||n.path);return"v2"!==o&&"search"===n.methodType?ie(new oe(r,t,n,e)):"v2"!==o&&"list"===n.methodType?ie(new re(r,t,n,e)):"v2"===o&&"list"===n.methodType?ie(new se(r,t,n,e)):null})(this,t,e,r)),r}},ue.MAX_BUFFERED_REQUEST_METRICS=100,ue.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){const n=[this.basePath(t),this.path(t)];if("function"==typeof e){const r=e(t);r&&n.push(r)}else n.push(e);return this._joinUrlParts(n)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts:e=>e.join("/").replace(/\/{2,}/g,"/"),_getRequestOpts(e,t,n){var r;const o=(t.method||"GET").toUpperCase(),s=t.usage||[],i=t.urlParams||[],a=t.encode||(e=>e),c=!!t.fullPath,u=P(c?t.fullPath:t.path||""),l=c?t.fullPath:this.createResourcePathWithSymbols(t.path),d=[].slice.call(e),h=i.reduce((e,t)=>{const n=d.shift();if("string"!=typeof n)throw new Error(`Stripe: Argument "${t}" must be a string, but got: ${n} (on API request to \`${o} ${l}\`)`);return e[t]=n,e},{}),p=T(d),m=a(Object.assign({},p,n)),f=E(d),v=f.host||t.host,_=!!t.streaming||!!f.streaming;if(d.filter(e=>null!=e).length)throw new Error(`Stripe: Unknown arguments (${d}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${o} \`${l}\`)`);const g=c?u(h):this.createFullPath(u,h),y=Object.assign(f.headers,t.headers);t.validator&&t.validator(m,{headers:y});const b="GET"===t.method||"DELETE"===t.method;return{requestMethod:o,requestPath:g,bodyData:b?null:m,queryData:b?m:{},authenticator:null!==(r=f.authenticator)&&void 0!==r?r:null,headers:y,host:null!=v?v:null,streaming:_,settings:f.settings,usage:s}},_makeRequest(e,t,n){return new Promise((r,o)=>{var s;let i;try{i=this._getRequestOpts(e,t,n)}catch(e){return void o(e)}const a=0===Object.keys(i.queryData).length,c=[i.requestPath,a?"":"?",g(i.queryData)].join(""),{headers:u,settings:l}=i;this._stripe._requestSender._request(i.requestMethod,i.host,c,i.bodyData,i.authenticator,{headers:u,settings:l,streaming:i.streaming},i.usage,function(e,n){e?o(e):r(t.transformResponseData?t.transformResponseData(n):n)},null===(s=this.requestDataProcessor)||void 0===s?void 0:s.bind(this))})}};class le{constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new le([...this._segments,e])}pop(){if(0===this._segments.length)throw new Error("Cannot pop from an empty context");return new le(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return new le(e?e.split("/"):[])}}function de(e){const t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(e,n,r,o,s,a){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(e,n,r,o||t.DEFAULT_TOLERANCE,s,a)}catch(e){throw e instanceof i&&(e.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),e}return e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},async constructEventAsync(e,n,r,o,s,i){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");await this.signature.verifyHeaderAsync(e,n,r,o||t.DEFAULT_TOLERANCE,s,i);return e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},generateTestHeaderString:function(e){const t=u(e),n=t.signature||t.cryptoProvider.computeHMACSignature(t.payloadString,t.secret);return t.generateHeaderString(n)},generateTestHeaderStringAsync:async function(e){const t=u(e),n=t.signature||await t.cryptoProvider.computeHMACSignatureAsync(t.payloadString,t.secret);return t.generateHeaderString(n)}},n={EXPECTED_SCHEME:"v1",verifyHeader(e,t,n,i,a,u){const{decodedHeader:l,decodedPayload:d,details:h,suspectPayloadType:p}=o(e,t,this.EXPECTED_SCHEME),m=/\s/.test(n);return s(d,l,h,(a=a||c()).computeHMACSignature(r(d,h),n),i,p,m,u),!0},async verifyHeaderAsync(e,t,n,i,a,u){const{decodedHeader:l,decodedPayload:d,details:h,suspectPayloadType:p}=o(e,t,this.EXPECTED_SCHEME),m=/\s/.test(n);a=a||c();return s(d,l,h,await a.computeHMACSignatureAsync(r(d,h),n),i,p,m,u)}};function r(e,t){return`${t.timestamp}.${e}`}function o(e,t,n){if(!e)throw new B(t,e,{message:"No webhook payload was provided."});const r="string"!=typeof e&&!(e instanceof Uint8Array),o=new TextDecoder("utf8"),s=e instanceof Uint8Array?o.decode(e):e;if(Array.isArray(t))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(null==t||""==t)throw new B(t,e,{message:"No stripe-signature header value was provided."});const i=t instanceof Uint8Array?o.decode(t):t,a=function(e,t){if("string"!=typeof e)return null;return e.split(",").reduce((e,n)=>{const r=n.split("=");return"t"===r[0]&&(e.timestamp=parseInt(r[1],10)),r[0]===t&&e.signatures.push(r[1]),e},{timestamp:-1,signatures:[]})}(i,n);if(!a||-1===a.timestamp)throw new B(i,s,{message:"Unable to extract timestamp and signatures from header"});if(!a.signatures.length)throw new B(i,s,{message:"No signatures found with expected scheme"});return{decodedPayload:s,decodedHeader:i,details:a,suspectPayloadType:r}}function s(t,n,r,o,s,i,a,c){const u="\nLearn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature",l=a?"\n\nNote: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value":"";if(!!!r.signatures.filter(e.secureCompare.bind(e,o)).length){if(i)throw new B(n,t,{message:"Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. \nSignature verification is impossible without access to the original signed material. \n"+u+"\n"+l});throw new B(n,t,{message:"No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? \n If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.\n"+u+"\n"+l})}const d=Math.floor(("number"==typeof c?c:Date.now())/1e3)-r.timestamp;if(s>0&&d>s)throw new B(n,t,{message:"Timestamp outside the tolerance zone"});return!0}let a=null;function c(){return a||(a=e.createDefaultCryptoProvider()),a}function u(e){if(!e)throw new F({message:"Options are required"});const t=Math.floor(e.timestamp)||Math.floor(Date.now()/1e3),r=e.scheme||n.EXPECTED_SCHEME,o=e.cryptoProvider||c(),s=`${t}.${e.payload}`;return Object.assign(Object.assign({},e),{timestamp:t,scheme:r,cryptoProvider:o,payloadString:s,generateHeaderString:e=>`t=${t},${r}=${e}`})}return t.signature=n,t}const he="2026-01-28.clover";function pe(e,t){for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const r=n[0].toLowerCase()+n.substring(1),o=new t[n](e);this[r]=o}}function me(e,t){return function(e){return new pe(e,t)}}const fe=ue.method,ve=ue.extend({create:fe({method:"POST",fullPath:"/v2/core/account_links"})}),_e=ue.method,ge=ue.extend({create:_e({method:"POST",fullPath:"/v2/core/account_tokens"}),retrieve:_e({method:"GET",fullPath:"/v2/core/account_tokens/{id}"})}),ye=ue.method,Pe=ue.extend({retrieve:ye({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ye({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ye({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ye({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ye({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ye({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ye({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),Te=ue.method,Ee=ue.extend({create:Te({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons"}),retrieve:Te({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),update:Te({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),list:Te({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons",methodType:"list"}),del:Te({method:"DELETE",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"})}),be=ue.method,we=ue.extend({create:be({method:"POST",fullPath:"/v2/core/accounts/{account_id}/person_tokens"}),retrieve:be({method:"GET",fullPath:"/v2/core/accounts/{account_id}/person_tokens/{id}"})}),Se=ue.method,Oe=ue.extend({constructor:function(...e){ue.apply(this,e),this.persons=new Ee(...e),this.personTokens=new we(...e)},create:Se({method:"POST",fullPath:"/v2/core/accounts"}),retrieve:Se({method:"GET",fullPath:"/v2/core/accounts/{id}"}),update:Se({method:"POST",fullPath:"/v2/core/accounts/{id}"}),list:Se({method:"GET",fullPath:"/v2/core/accounts",methodType:"list"}),close:Se({method:"POST",fullPath:"/v2/core/accounts/{id}/close"})}),xe=ue.method,ke=ue.extend({retrieve:xe({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:xe({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),ze=ue.method,Ae=ue.extend({create:ze({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:ze({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:ze({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:ze({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:ze({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:ze({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Ce=ue.method,Ie=ue.extend({find:Ce({method:"GET",fullPath:"/v1/tax/associations/find"})}),Ge=ue.method,Re=ue.extend({retrieve:Ge({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:Ge({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:Ge({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:Ge({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:Ge({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),$e=ue.method,Ne=ue.extend({create:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:$e({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),je=ue.method,De=ue.extend({create:je({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:je({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:je({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),qe=ue.method,Fe=ue.extend({create:qe({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:qe({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:qe({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:qe({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),Me=ue.method,Ue=ue.extend({create:Me({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Me({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Me({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Me({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),Ze=ue.method,Le=ue.extend({deliverCard:Ze({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Ze({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Ze({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Ze({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:Ze({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),He=ue.method,Je=ue.extend({create:He({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:He({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:He({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:He({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Ve=ue.method,Be=ue.extend({create:Ve({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Ve({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Ve({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Ve({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Ve({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Ke=ue.method,We=ue.extend({create:Ke({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),Ye=ue.method,Xe=ue.extend({create:Ye({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Qe=ue.method,et=ue.extend({retrieve:Qe({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),tt=ue.method,nt=ue.extend({retrieve:tt({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:tt({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),rt=ue.method,ot=ue.extend({create:rt({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:rt({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:rt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:rt({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:rt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:rt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),st=ue.method,it=ue.extend({create:st({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:st({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:st({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),at=ue.method,ct=ue.extend({fundCashBalance:at({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),ut=ue.method,lt=ue.extend({create:ut({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:ut({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:ut({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),dt=ue.method,ht=ue.extend({create:dt({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:dt({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:dt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:dt({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:dt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),pt=ue.method,mt=ue.extend({retrieve:pt({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:pt({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),ft=ue.method,vt=ue.extend({create:ft({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:ft({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:ft({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:ft({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:ft({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:ft({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:ft({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:ft({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),_t=ue.method,gt=ue.extend({retrieve(...e){return _t({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:e=>this.addFetchRelatedObjectIfNeeded(e)}).apply(this,e)},list(...e){return _t({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:e=>Object.assign(Object.assign({},e),{data:e.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,e)},addFetchRelatedObjectIfNeeded(e){return e.related_object&&e.related_object.url?Object.assign(Object.assign({},e),{fetchRelatedObject:()=>_t({method:"GET",fullPath:e.related_object.url}).apply(this,[{stripeContext:e.context}])}):e}}),yt=ue.method,Pt=ue.extend({create:yt({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:yt({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:yt({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:yt({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),Tt=ue.method,Et=ue.extend({create:Tt({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Tt({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Tt({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Tt({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Tt({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Tt({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Tt({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),bt=ue.method,wt=ue.extend({fail:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),St=ue.method,Ot=ue.extend({create:St({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:St({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:St({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:St({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),xt=ue.method,kt=ue.extend({create:xt({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:xt({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:xt({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:xt({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:xt({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),zt=ue.method,At=ue.extend({create:zt({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Ct=ue.method,It=ue.extend({create:Ct({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Gt=ue.method,Rt=ue.extend({create:Gt({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),$t=ue.method,Nt=ue.extend({create:$t({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),jt=ue.method,Dt=ue.extend({create:jt({method:"POST",fullPath:"/v1/billing/meter_events"})}),qt=ue.method,Ft=ue.extend({create:qt({method:"POST",fullPath:"/v2/billing/meter_events"})}),Mt=ue.method,Ut=ue.extend({create:Mt({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Mt({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Mt({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Mt({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Mt({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Mt({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Mt({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),Zt=ue.method,Lt=ue.extend({create:Zt({method:"POST",fullPath:"/v1/terminal/onboarding_links"})}),Ht=ue.method,Jt=ue.extend({create:Ht({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Ht({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Ht({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Ht({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Ht({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),Vt=ue.method,Bt=ue.extend({update:Vt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:Vt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:Vt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:Vt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),Kt=ue.method,Wt=ue.extend({create:Kt({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Kt({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Kt({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Kt({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),Yt=ue.method,Xt=ue.extend({update:Yt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:Yt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:Yt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:Yt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),Qt=ue.method,en=ue.extend({create:Qt({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:Qt({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:Qt({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:Qt({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),tn=ue.method,nn=ue.extend({create:tn({method:"POST",fullPath:"/v1/radar/payment_evaluations"})}),rn=ue.method,on=ue.extend({create:rn({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:rn({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:rn({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:rn({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),sn=ue.method,an=ue.extend({activate:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),cn=ue.method,un=ue.extend({retrieve:cn({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:cn({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),ln=ue.method,dn=ue.extend({retrieve:ln({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:ln({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),hn=ue.method,pn=ue.extend({create:hn({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:hn({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:hn({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:hn({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:hn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),mn=ue.method,fn=ue.extend({presentPaymentMethod:mn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:mn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:mn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),vn=ue.method,_n=ue.extend({create:vn({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),gn=ue.method,yn=ue.extend({retrieve:gn({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:gn({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Pn=ue.method,Tn=ue.extend({create:Pn({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),En=ue.method,bn=ue.extend({retrieve:En({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:En({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),wn=ue.method,Sn=ue.extend({expire:wn({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),On=ue.method,xn=ue.extend({create:On({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:On({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:On({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:On({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),kn=ue.method,zn=ue.extend({create:kn({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:kn({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:kn({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),An=ue.method,Cn=ue.extend({retrieve:An({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:An({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),In=ue.method,Gn=ue.extend({create:In({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:In({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:In({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),Rn=ue.method,$n=ue.extend({retrieve:Rn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Rn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),Nn=ue.method,jn=ue.extend({create:Nn({method:"POST",fullPath:"/v1/apps/secrets"}),list:Nn({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Nn({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Nn({method:"GET",fullPath:"/v1/apps/secrets/find"})}),Dn=ue.method,qn=ue.extend({create:Dn({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Fn=ue.method,Mn=ue.extend({create:Fn({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Fn({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Fn({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Fn({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Fn({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Fn({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Un=ue.method,Zn=ue.extend({create:Un({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Un({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),Ln=ue.method,Hn=ue.extend({retrieve:Ln({method:"GET",fullPath:"/v1/tax/settings"}),update:Ln({method:"POST",fullPath:"/v1/tax/settings"})}),Jn=ue.method,Vn=ue.extend({retrieve:Jn({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:Jn({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),Bn=ue.method,Kn=ue.extend({create:Bn({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Bn({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Bn({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Bn({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Bn({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Wn=ue.method,Yn=ue.extend({retrieve:Wn({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Wn({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Wn({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Xn=ue.method,Qn=ue.extend({retrieve:Xn({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Xn({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),er=ue.method,tr=ue.extend({retrieve:er({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:er({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),nr=ue.method,rr=ue.extend({retrieve:nr({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:nr({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:nr({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),or=ue.method,sr=ue.extend({retrieve:or({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:or({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:or({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:or({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),ir=ue.method,ar=ue.extend({createForceCapture:ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),cr=ue.method,ur=ue.extend({retrieve:cr({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:cr({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),lr=ue.method,dr=ue.extend({create:lr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:lr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:lr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:lr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),hr=ue.method,pr=ue.extend({create:hr({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:hr({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:hr({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:hr({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:hr({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),mr=ue.method,fr=ue.extend({retrieve:mr({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:mr({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),vr=ue.method,_r=ue.extend({create:vr({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:vr({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:vr({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:vr({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:vr({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:vr({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),gr=ue.method,yr=ue.extend({create:gr({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return"string"==typeof e?gr({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(null==e&&[].shift.apply([e,...t]),gr({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:gr({method:"POST",fullPath:"/v1/accounts/{account}"}),list:gr({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:gr({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:gr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:gr({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:gr({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:gr({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:gr({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:gr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:gr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:gr({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:gr({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:gr({method:"GET",fullPath:"/v1/account"}),retrieveCapability:gr({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:gr({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:gr({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:gr({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:gr({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:gr({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),Pr=ue.method,Tr=ue.extend({create:Pr({method:"POST",fullPath:"/v1/account_links"})}),Er=ue.method,br=ue.extend({create:Er({method:"POST",fullPath:"/v1/account_sessions"})}),wr=ue.method,Sr=ue.extend({create:wr({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:wr({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:wr({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:wr({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),Or=ue.method,xr=ue.extend({retrieve:Or({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Or({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Or({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Or({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Or({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Or({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),kr=ue.method,zr=ue.extend({retrieve:kr({method:"GET",fullPath:"/v1/balance"})}),Ar=ue.method,Cr=ue.extend({retrieve:Ar({method:"GET",fullPath:"/v1/balance_settings"}),update:Ar({method:"POST",fullPath:"/v1/balance_settings"})}),Ir=ue.method,Gr=ue.extend({retrieve:Ir({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:Ir({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),Rr=ue.method,$r=ue.extend({create:Rr({method:"POST",fullPath:"/v1/charges"}),retrieve:Rr({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Rr({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Rr({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Rr({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Rr({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Nr=ue.method,jr=ue.extend({retrieve:Nr({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),Dr=ue.method,qr=ue.extend({retrieve:Dr({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Dr({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Fr=ue.method,Mr=ue.extend({create:Fr({method:"POST",fullPath:"/v1/coupons"}),retrieve:Fr({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Fr({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Fr({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Fr({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Ur=ue.method,Zr=ue.extend({create:Ur({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Ur({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Ur({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Ur({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Ur({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Ur({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Ur({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Ur({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),Lr=ue.method,Hr=ue.extend({create:Lr({method:"POST",fullPath:"/v1/customer_sessions"})}),Jr=ue.method,Vr=ue.extend({create:Jr({method:"POST",fullPath:"/v1/customers"}),retrieve:Jr({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Jr({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Jr({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Jr({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Jr({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Jr({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Jr({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Jr({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Jr({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Jr({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Jr({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Jr({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Jr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Jr({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Jr({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Jr({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Jr({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Jr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Jr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Jr({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Jr({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Jr({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Jr({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Jr({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Jr({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Jr({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Jr({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),Br=ue.method,Kr=ue.extend({retrieve:Br({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Br({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Br({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Br({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),Wr=ue.method,Yr=ue.extend({create:Wr({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Wr({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),Xr=ue.method,Qr=ue.extend({retrieve:Xr({method:"GET",fullPath:"/v1/events/{id}"}),list:Xr({method:"GET",fullPath:"/v1/events",methodType:"list"})}),eo=ue.method,to=ue.extend({retrieve:eo({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:eo({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),no=ue.method,ro=ue.extend({create:no({method:"POST",fullPath:"/v1/file_links"}),retrieve:no({method:"GET",fullPath:"/v1/file_links/{link}"}),update:no({method:"POST",fullPath:"/v1/file_links/{link}"}),list:no({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),oo=(e,t,n)=>{const r=(Math.round(1e16*Math.random())+Math.round(1e16*Math.random())).toString();n["Content-Type"]=`multipart/form-data; boundary=${r}`;const o=new TextEncoder;let s=new Uint8Array(0);const i=o.encode("\r\n");function a(e){const t=s,n=e instanceof Uint8Array?e:new Uint8Array(o.encode(e));s=new Uint8Array(t.length+n.length+2),s.set(t),s.set(n,t.length),s.set(i,s.length-2)}function c(e){return`"${e.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const u=function(e){const t={},n=(e,r)=>{Object.entries(e).forEach(([e,o])=>{const s=r?`${r}[${e}]`:e;if(function(e){const t=typeof e;return("function"===t||"object"===t)&&!!e}(o)){if(!(o instanceof Uint8Array||Object.prototype.hasOwnProperty.call(o,"data")))return n(o,s);t[s]=o}else t[s]=String(o)})};return n(e,null),t}(t);for(const e in u){if(!Object.prototype.hasOwnProperty.call(u,e))continue;const t=u[e];if(a(`--${r}`),Object.prototype.hasOwnProperty.call(t,"data")){const n=t;a(`Content-Disposition: form-data; name=${c(e)}; filename=${c(n.name||"blob")}`),a(`Content-Type: ${n.type||"application/octet-stream"}`),a(""),a(n.data)}else a(`Content-Disposition: form-data; name=${c(e)}`),a(""),a(t)}return a(`--${r}--`),s};const so=ue.method,io=ue.extend({create:so({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:so({method:"GET",fullPath:"/v1/files/{file}"}),list:so({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:function(e,t,n,r){if(t=t||{},"POST"!==e)return r(null,g(t));this._stripe._platformFunctions.tryBufferData(t).then(e=>{const t=oo(0,e,n);return r(null,t)}).catch(e=>r(e,null))}}),ao=ue.method,co=ue.extend({create:ao({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:ao({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:ao({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:ao({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:ao({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),uo=ue.method,lo=ue.extend({retrieve:uo({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:uo({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),ho=ue.method,po=ue.extend({retrieve:ho({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:ho({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:ho({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:ho({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),mo=ue.method,fo=ue.extend({create:mo({method:"POST",fullPath:"/v1/invoices"}),retrieve:mo({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:mo({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:mo({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:mo({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:mo({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:mo({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:mo({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:mo({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),vo=ue.method,_o=ue.extend({retrieve:vo({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),go=ue.method,yo="connect.stripe.com",Po=ue.extend({basePath:"/",authorizeUrl(e,t){e=e||{};let n="oauth/authorize";return(t=t||{}).express&&(n=`express/${n}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${yo}/${n}?${g(e)}`},token:go({method:"POST",path:"oauth/token",host:yo}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),go({method:"POST",path:"oauth/deauthorize",host:yo}).apply(this,[e,...t])}}),To=ue.method,Eo=ue.extend({retrieve:To({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:To({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})}),bo=ue.method,wo=ue.extend({create:bo({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:bo({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:bo({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:bo({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:bo({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:bo({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),So=ue.method,Oo=ue.extend({create:So({method:"POST",fullPath:"/v1/payment_links"}),retrieve:So({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:So({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:So({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:So({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),xo=ue.method,ko=ue.extend({create:xo({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:xo({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:xo({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:xo({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),zo=ue.method,Ao=ue.extend({create:zo({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:zo({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:zo({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:zo({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:zo({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),Co=ue.method,Io=ue.extend({create:Co({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Co({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Co({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),Go=ue.method,Ro=ue.extend({retrieve:Go({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:Go({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:Go({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})}),$o=ue.method,No=ue.extend({create:$o({method:"POST",fullPath:"/v1/payouts"}),retrieve:$o({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:$o({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:$o({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:$o({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:$o({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),jo=ue.method,Do=ue.extend({create:jo({method:"POST",fullPath:"/v1/plans"}),retrieve:jo({method:"GET",fullPath:"/v1/plans/{plan}"}),update:jo({method:"POST",fullPath:"/v1/plans/{plan}"}),list:jo({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:jo({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),qo=ue.method,Fo=ue.extend({create:qo({method:"POST",fullPath:"/v1/prices"}),retrieve:qo({method:"GET",fullPath:"/v1/prices/{price}"}),update:qo({method:"POST",fullPath:"/v1/prices/{price}"}),list:qo({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:qo({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),Mo=ue.method,Uo=ue.extend({create:Mo({method:"POST",fullPath:"/v1/products"}),retrieve:Mo({method:"GET",fullPath:"/v1/products/{id}"}),update:Mo({method:"POST",fullPath:"/v1/products/{id}"}),list:Mo({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:Mo({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:Mo({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:Mo({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:Mo({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:Mo({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:Mo({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Zo=ue.method,Lo=ue.extend({create:Zo({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Zo({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Zo({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Zo({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),Ho=ue.method,Jo=ue.extend({create:Ho({method:"POST",fullPath:"/v1/quotes"}),retrieve:Ho({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Ho({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Ho({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Ho({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Ho({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Ho({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Ho({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Ho({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Ho({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Vo=ue.method,Bo=ue.extend({create:Vo({method:"POST",fullPath:"/v1/refunds"}),retrieve:Vo({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Vo({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Vo({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Vo({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Ko=ue.method,Wo=ue.extend({retrieve:Ko({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Ko({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Ko({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Yo=ue.method,Xo=ue.extend({list:Yo({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Qo=ue.method,es=ue.extend({create:Qo({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Qo({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Qo({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Qo({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Qo({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Qo({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Qo({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),ts=ue.method,ns=ue.extend({create:ts({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:ts({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:ts({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:ts({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),rs=ue.method,os=ue.extend({create:rs({method:"POST",fullPath:"/v1/sources"}),retrieve:rs({method:"GET",fullPath:"/v1/sources/{source}"}),update:rs({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:rs({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:rs({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),ss=ue.method,is=ue.extend({create:ss({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:ss({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:ss({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:ss({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:ss({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),as=ue.method,cs=ue.extend({create:as({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:as({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:as({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:as({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:as({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:as({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),us=ue.method,ls=ue.extend({create:us({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:us({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:us({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:us({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:us({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:us({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:us({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:us({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:us({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),ds=ue.method,hs=ue.extend({retrieve:ds({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:ds({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),ps=ue.method,ms=ue.extend({create:ps({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:ps({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:ps({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:ps({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),fs=ue.method,vs=ue.extend({create:fs({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:fs({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:fs({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:fs({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),_s=ue.method,gs=ue.extend({create:_s({method:"POST",fullPath:"/v1/tokens"}),retrieve:_s({method:"GET",fullPath:"/v1/tokens/{token}"})}),ys=ue.method,Ps=ue.extend({create:ys({method:"POST",fullPath:"/v1/topups"}),retrieve:ys({method:"GET",fullPath:"/v1/topups/{topup}"}),update:ys({method:"POST",fullPath:"/v1/topups/{topup}"}),list:ys({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:ys({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),Ts=ue.method,Es=ue.extend({create:Ts({method:"POST",fullPath:"/v1/transfers"}),retrieve:Ts({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Ts({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Ts({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Ts({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Ts({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Ts({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Ts({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),bs=ue.method,ws=ue.extend({create:bs({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:bs({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:bs({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:bs({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:bs({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),Ss=me(0,{Secrets:jn}),Os=me(0,{Alerts:Ae,CreditBalanceSummary:et,CreditBalanceTransactions:nt,CreditGrants:ot,MeterEventAdjustments:At,MeterEvents:Dt,Meters:Ut}),xs=me(0,{Configurations:Je,Sessions:qn}),ks=me(0,{Sessions:Mn}),zs=me(0,{Orders:Jt,Products:dn,Suppliers:Vn}),As=me(0,{ActiveEntitlements:ke,Features:Pt}),Cs=me(0,{Accounts:Pe,Sessions:Zn,Transactions:tr}),Is=me(0,{Requests:Gn}),Gs=me(0,{VerificationReports:fr,VerificationSessions:_r}),Rs=me(0,{Authorizations:Re,Cardholders:Fe,Cards:Ue,Disputes:ht,PersonalizationDesigns:on,PhysicalBundles:un,Tokens:Yn,Transactions:rr}),$s=me(0,{EarlyFraudWarnings:mt,PaymentEvaluations:nn,ValueListItems:dr,ValueLists:pr}),Ns=me(0,{ReportRuns:zn,ReportTypes:Cn}),js=me(0,{ScheduledQueryRuns:$n}),Ds=me(0,{Associations:Ie,Calculations:De,Registrations:xn,Settings:Hn,Transactions:sr}),qs=me(0,{Configurations:Be,ConnectionTokens:Xe,Locations:kt,OnboardingLinks:Lt,Readers:pn}),Fs=me(0,{ConfirmationTokens:We,Customers:ct,Refunds:Sn,TestClocks:Kn,Issuing:me(0,{Authorizations:Ne,Cards:Le,PersonalizationDesigns:an,Transactions:ar}),Terminal:me(0,{Readers:fn}),Treasury:me(0,{InboundTransfers:wt,OutboundPayments:Bt,OutboundTransfers:Xt,ReceivedCredits:_n,ReceivedDebits:Tn})}),Ms=me(0,{CreditReversals:it,DebitReversals:lt,FinancialAccounts:Et,InboundTransfers:Ot,OutboundPayments:Wt,OutboundTransfers:en,ReceivedCredits:yn,ReceivedDebits:bn,TransactionEntries:Qn,Transactions:ur}),Us=me(0,{Billing:me(0,{MeterEventAdjustments:It,MeterEventSession:Rt,MeterEventStream:Nt,MeterEvents:Ft}),Core:me(0,{AccountLinks:ve,AccountTokens:ge,Accounts:Oe,EventDestinations:vt,Events:gt})});var Zs=Object.freeze({__proto__:null,Account:yr,AccountLinks:Tr,AccountSessions:br,Accounts:yr,ApplePayDomains:Sr,ApplicationFees:xr,Apps:Ss,Balance:zr,BalanceSettings:Cr,BalanceTransactions:Gr,Billing:Os,BillingPortal:xs,Charges:$r,Checkout:ks,Climate:zs,ConfirmationTokens:jr,CountrySpecs:qr,Coupons:Mr,CreditNotes:Zr,CustomerSessions:Hr,Customers:Vr,Disputes:Kr,Entitlements:As,EphemeralKeys:Yr,Events:Qr,ExchangeRates:to,FileLinks:ro,Files:io,FinancialConnections:Cs,Forwarding:Is,Identity:Gs,InvoiceItems:co,InvoicePayments:lo,InvoiceRenderingTemplates:po,Invoices:fo,Issuing:Rs,Mandates:_o,OAuth:Po,PaymentAttemptRecords:Eo,PaymentIntents:wo,PaymentLinks:Oo,PaymentMethodConfigurations:ko,PaymentMethodDomains:Ao,PaymentMethods:Io,PaymentRecords:Ro,Payouts:No,Plans:Do,Prices:Fo,Products:Uo,PromotionCodes:Lo,Quotes:Jo,Radar:$s,Refunds:Bo,Reporting:Ns,Reviews:Wo,SetupAttempts:Xo,SetupIntents:es,ShippingRates:ns,Sigma:js,Sources:os,SubscriptionItems:is,SubscriptionSchedules:cs,Subscriptions:ls,Tax:Ds,TaxCodes:hs,TaxIds:ms,TaxRates:vs,Terminal:qs,TestHelpers:Fs,Tokens:gs,Topups:Ps,Transfers:Es,Treasury:Ms,V2:Us,WebhookEndpoints:ws});const Ls="api.stripe.com",Hs="/v1/",Js=he,Vs=["name","version","url","partner_id"],Bs=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Ks=e=>new te(e,ue.MAX_BUFFERED_REQUEST_METRICS);const Ws=function(e,t=Ks){function n(r,o={}){if(!(this instanceof n))return new n(r,o);const s=this._getPropsFromConfig(o);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const i=s.httpAgent||null;this._api={host:s.host||Ls,port:s.port||"443",protocol:s.protocol||"https",basePath:Hs,version:s.apiVersion||Js,timeout:x("timeout",s.timeout,8e4),maxNetworkRetries:x("maxNetworkRetries",s.maxNetworkRetries,2),agent:i,httpClient:s.httpClient||(i?this._platformFunctions.createNodeHttpClient(i):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:s.stripeAccount||null,stripeContext:s.stripeContext||null};const a=s.typescript||!1;a!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=a),s.appInfo&&this._setAppInfo(s.appInfo),this._prepResources(),this._setAuthenticator(r,s.authenticator),this.errors=Q,this.webhooks=n.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=!1!==s.telemetry,this._requestSender=t(this),this.StripeResource=n.StripeResource}return n.PACKAGE_VERSION="20.3.0",n.API_VERSION=he,n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},"undefined"==typeof process?{}:{lang_version:process.version,platform:process.platform}),n.StripeResource=ue,n.StripeContext=le,n.resources=Zs,n.HttpClient=c,n.HttpClientResponse=u,n.CryptoProvider=s,n.webhooks=de(e),n.errors=Q,n.createNodeHttpClient=e.createNodeHttpClient,n.createFetchHttpClient=e.createFetchHttpClient,n.createNodeCryptoProvider=e.createNodeCryptoProvider,n.createSubtleCryptoProvider=e.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(e,t,n,r){return this._requestSender._rawRequest(e,t,n,r)},_setAuthenticator(e,t){if(e&&t)throw new Error("Can't specify both apiKey and authenticator");if(!e&&!t)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=e?k(e):t},_setAppInfo(e){if(e&&"object"!=typeof e)throw new Error("AppInfo must be an object.");if(e&&!e.name)throw new Error("AppInfo.name is required");e=e||{},this._appInfo=Vs.reduce((t,n)=>("string"==typeof e[n]&&((t=t||{})[n]=e[n]),t),{})},_setApiField(e,t){this._api[e]=t},getApiField(e){return this._api[e]},setClientId(e){this._clientId=e},getClientId(){return this._clientId},getConstant:e=>{switch(e){case"DEFAULT_HOST":return Ls;case"DEFAULT_PORT":return"443";case"DEFAULT_BASE_PATH":return Hs;case"DEFAULT_API_VERSION":return Js;case"DEFAULT_TIMEOUT":return 8e4;case"MAX_NETWORK_RETRY_DELAY_SEC":return 5;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return.5}return n[e]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(e,t,n){const r=x(e,t,n);this._setApiField(e,r)},getMaxNetworkRetryDelay:()=>5,getInitialNetworkRetryDelay:()=>.5,getClientUserAgent(e){return this.getClientUserAgentSeeded(n.USER_AGENT,e)},getClientUserAgentSeeded(e,t){this._platformFunctions.getUname().then(n=>{var r;const o={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=encodeURIComponent(null!==(r=e[t])&&void 0!==r?r:"null"));o.uname=encodeURIComponent(n||"UNKNOWN");const s=this.getApiField("httpClient");s&&(o.httplib=encodeURIComponent(s.getClientName())),this._appInfo&&(o.application=this._appInfo),t(JSON.stringify(o))})},getAppInfoAsString(){if(!this._appInfo)return"";let e=this._appInfo.name;return this._appInfo.version&&(e+=`/${this._appInfo.version}`),this._appInfo.url&&(e+=` (${this._appInfo.url})`),e},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const e in Zs)Object.prototype.hasOwnProperty.call(Zs,e)&&(this[S(e)]=new Zs[e](this))},_getPropsFromConfig(e){if(!e)return{};const t="string"==typeof e;if(!(e===Object(e)&&!Array.isArray(e))&&!t)throw new Error("Config must either be an object or a string");if(t)return{apiVersion:e};if(Object.keys(e).filter(e=>!Bs.includes(e)).length>0)throw new Error(`Config object may only contain the following: ${Bs.join(", ")}`);return e},parseEventNotification(e,t,n,r,o,s){const i=this.webhooks.constructEvent(e,t,n,r,o,s);return i.context&&(i.context=le.parse(i.context)),i.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${i.id}`,void 0,{stripeContext:i.context},["fetch_event"]),i.fetchRelatedObject=()=>i.related_object?this._requestSender._rawRequest("GET",i.related_object.url,void 0,{stripeContext:i.context},["fetch_related_object"]):Promise.resolve(null),i}},n}(new class extends j{constructor(){super(),this._exec=o,this._UNAME_CACHE=null}uuid4(){return e.randomUUID?e.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,t)=>{try{this._exec("uname -a",(t,n)=>{if(t)return e(null);e(n)})}catch(t){e(null)}})),this._UNAME_CACHE}secureCompare(t,n){if(!t||!n)throw new Error("secureCompare must receive two arguments");if(t.length!==n.length)return!1;if(e.timingSafeEqual){const r=new TextEncoder,o=r.encode(t),s=r.encode(n);return e.timingSafeEqual(o,s)}return super.secureCompare(t,n)}createEmitter(){return new t}tryBufferData(e){if(!(e.file.data instanceof t))return Promise.resolve(e);const n=[];return new Promise((t,r)=>{e.file.data.on("data",e=>{n.push(e)}).once("end",()=>{const r=Object.assign({},e);r.file.data=function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(e,r),r+=e.length}),n}(n),t(r)}).on("error",e=>{r(new ee({message:"An error occurred while attempting to process the file for upload.",detail:e}))})})}createNodeHttpClient(e){return new m(e)}createDefaultHttpClient(){return new m}createNodeCryptoProvider(){return new a}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}});let Ys;const Xs=()=>{if(!Ys){if(!process.env.STRIPE_SECRET_KEY)throw console.error(" STRIPE_SECRET_KEY no est definida en las variables de entorno"),new Error("Stripe no est configurado");Ys=new Ws(process.env.STRIPE_SECRET_KEY)}return Ys};function Qs(e,t,n){function r(n,r){if(n._zod||Object.defineProperty(n,"_zod",{value:{def:r,constr:i,traits:new Set},enumerable:!1}),n._zod.traits.has(e))return;n._zod.traits.add(e),t(n,r);const o=i.prototype,s=Object.keys(o);for(let e=0;e<s.length;e++){const t=s[e];t in n||(n[t]=o[t].bind(n))}}const o=n?.Parent??Object;class s extends o{}function i(e){var t;const o=n?.Parent?new s:this;r(o,e),(t=o._zod).deferred??(t.deferred=[]);for(const e of o._zod.deferred)e();return o}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class ei extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class ti extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const ni={};function ri(e){return e&&Object.assign(ni,e),ni}function oi(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function si(e,t){return"bigint"==typeof t?t.toString():t}function ii(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ai(e){return null==e}function ci(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}const ui=Symbol("evaluating");function li(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==ui)return void 0===r&&(r=ui,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function di(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function hi(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function pi(e){return JSON.stringify(e)}const mi="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function fi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const vi=ii(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function _i(e){if(!1===fi(e))return!1;const t=e.constructor;if(void 0===t)return!0;if("function"!=typeof t)return!0;const n=t.prototype;return!1!==fi(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function gi(e){return _i(e)?{...e}:Array.isArray(e)?[...e]:e}const yi=new Set(["string","number","symbol"]);function Pi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ti(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function Ei(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}const bi={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function wi(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function Si(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function Oi(e){return"string"==typeof e?e:e?.message}function xi(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=Oi(e.inst?._zod.def?.error?.(e))??Oi(t?.error?.(e))??Oi(n.customError?.(e))??Oi(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function ki(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function zi(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}const Ai=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,si,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Ci=Qs("$ZodError",Ai),Ii=Qs("$ZodError",Ai,{Parent:Error});const Gi=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new ei;if(i.issues.length){const t=new(o?.Err??e)(i.issues.map(e=>xi(e,s,ri())));throw mi(t,o?.callee),t}return i.value},Ri=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(o?.Err??e)(i.issues.map(e=>xi(e,s,ri())));throw mi(t,o?.callee),t}return i.value},$i=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new ei;return s.issues.length?{success:!1,error:new(e??Ci)(s.issues.map(e=>xi(e,o,ri())))}:{success:!0,data:s.value}},Ni=$i(Ii),ji=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>xi(e,o,ri())))}:{success:!0,data:s.value}},Di=ji(Ii),qi=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Gi(e)(t,n,o)},Fi=e=>(t,n,r)=>Gi(e)(t,n,r),Mi=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ri(e)(t,n,o)},Ui=e=>async(t,n,r)=>Ri(e)(t,n,r),Zi=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return $i(e)(t,n,o)},Li=e=>(t,n,r)=>$i(e)(t,n,r),Hi=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ji(e)(t,n,o)},Ji=e=>async(t,n,r)=>ji(e)(t,n,r),Vi=/^[cC][^\s-]{8,}$/,Bi=/^[0-9a-z]+$/,Ki=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Wi=/^[0-9a-vA-V]{20}$/,Yi=/^[A-Za-z0-9]{27}$/,Xi=/^[a-zA-Z0-9_-]{21}$/,Qi=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ea=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ta=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,na=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const ra=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oa=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,sa=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ia=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aa=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ca=/^[A-Za-z0-9_-]*$/,ua=/^\+[1-9]\d{6,14}$/,la="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",da=new RegExp(`^${la}$`);function ha(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const pa=/^-?\d+$/,ma=/^-?\d+(?:\.\d+)?$/,fa=/^[^A-Z]*$/,va=/^[^a-z]*$/,_a=Qs("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),ga={number:"number",bigint:"bigint",object:"date"},ya=Qs("$ZodCheckLessThan",(e,t)=>{_a.init(e,t);const n=ga[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:"object"==typeof t.value?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Pa=Qs("$ZodCheckGreaterThan",(e,t)=>{_a.init(e,t);const n=ga[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:"object"==typeof t.value?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ta=Qs("$ZodCheckMultipleOf",(e,t)=>{_a.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(0===o&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(o=Number.parseInt(e[1]))}const s=n>o?n:o;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Ea=Qs("$ZodCheckNumberFormat",(e,t)=>{_a.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,s]=bi[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=o,r.maximum=s,n&&(r.pattern=pa)}),e._zod.check=i=>{const a=i.value;if(n){if(!Number.isInteger(a))return void i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}))}a<o&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>s&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inclusive:!0,inst:e,continue:!t.abort})}}),ba=Qs("$ZodCheckMaxLength",(e,t)=>{var n;_a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!ai(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const o=ki(r);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),wa=Qs("$ZodCheckMinLength",(e,t)=>{var n;_a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!ai(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const o=ki(r);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Sa=Qs("$ZodCheckLengthEquals",(e,t)=>{var n;_a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!ai(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,o=r.length;if(o===t.length)return;const s=ki(r),i=o>t.length;n.issues.push({origin:s,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Oa=Qs("$ZodCheckStringFormat",(e,t)=>{var n,r;_a.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),xa=Qs("$ZodCheckRegex",(e,t)=>{Oa.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ka=Qs("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=fa),Oa.init(e,t)}),za=Qs("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=va),Oa.init(e,t)}),Aa=Qs("$ZodCheckIncludes",(e,t)=>{_a.init(e,t);const n=Pi(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Ca=Qs("$ZodCheckStartsWith",(e,t)=>{_a.init(e,t);const n=new RegExp(`^${Pi(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Ia=Qs("$ZodCheckEndsWith",(e,t)=>{_a.init(e,t);const n=new RegExp(`.*${Pi(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Ga=Qs("$ZodCheckOverwrite",(e,t)=>{_a.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Ra{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const $a={major:4,minor:3,patch:6},Na=Qs("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=$a;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,o=wi(e);for(const s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(o)continue;const t=e.issues.length,i=s._zod.check(e);if(i instanceof Promise&&!1===n?.async)throw new ei;if(r||i instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await i;e.issues.length!==t&&(o||(o=wi(e,t)))});else{if(e.issues.length===t)continue;o||(o=wi(e,t))}}return r?r.then(()=>e):e},n=(n,o,s)=>{if(wi(n))return n.aborted=!0,n;const i=t(o,r,s);if(i instanceof Promise){if(!1===s.async)throw new ei;return i.then(t=>e._zod.parse(t,s))}return e._zod.parse(i,s)};e._zod.run=(o,s)=>{if(s.skipChecks)return e._zod.parse(o,s);if("backward"===s.direction){const t=e._zod.parse({value:o.value,issues:[]},{...s,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,o,s)):n(t,o,s)}const i=e._zod.parse(o,s);if(i instanceof Promise){if(!1===s.async)throw new ei;return i.then(e=>t(e,r,s))}return t(i,r,s)}}li(e,"~standard",()=>({validate:t=>{try{const n=Ni(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Di(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}))}),ja=Qs("$ZodString",(e,t)=>{var n;Na.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Da=Qs("$ZodStringFormat",(e,t)=>{Oa.init(e,t),ja.init(e,t)}),qa=Qs("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ea),Da.init(e,t)}),Fa=Qs("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ta(e))}else t.pattern??(t.pattern=ta());Da.init(e,t)}),Ma=Qs("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=na),Da.init(e,t)}),Ua=Qs("$ZodURL",(e,t)=>{Da.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=o.href:n.value=r)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Za=Qs("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Da.init(e,t)}),La=Qs("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Xi),Da.init(e,t)}),Ha=Qs("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Vi),Da.init(e,t)}),Ja=Qs("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Bi),Da.init(e,t)}),Va=Qs("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Ki),Da.init(e,t)}),Ba=Qs("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Wi),Da.init(e,t)}),Ka=Qs("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Yi),Da.init(e,t)}),Wa=Qs("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=ha({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${la}T(?:${r})$`)}(t)),Da.init(e,t)}),Ya=Qs("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=da),Da.init(e,t)}),Xa=Qs("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${ha(t)}$`)),Da.init(e,t)}),Qa=Qs("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Qi),Da.init(e,t)}),ec=Qs("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ra),Da.init(e,t),e._zod.bag.format="ipv4"}),tc=Qs("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=oa),Da.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),nc=Qs("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=sa),Da.init(e,t)}),rc=Qs("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=ia),Da.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function oc(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const sc=Qs("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=aa),Da.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{oc(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});const ic=Qs("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ca),Da.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{(function(e){if(!ca.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return oc(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),ac=Qs("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ua),Da.init(e,t)});const cc=Qs("$ZodJWT",(e,t)=>{Da.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&"JWT"!==o?.typ||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),uc=Qs("$ZodNumber",(e,t)=>{Na.init(e,t),e._zod.pattern=e._zod.bag.pattern??ma,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const o=n.value;if("number"==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s="number"==typeof o?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),lc=Qs("$ZodNumberFormat",(e,t)=>{Ea.init(e,t),uc.init(e,t)}),dc=Qs("$ZodUnknown",(e,t)=>{Na.init(e,t),e._zod.parse=e=>e}),hc=Qs("$ZodNever",(e,t)=>{Na.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function pc(e,t,n){e.issues.length&&t.issues.push(...Si(n,e.issues)),t.value[n]=e.value}const mc=Qs("$ZodArray",(e,t)=>{Na.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let e=0;e<o.length;e++){const i=o[e],a=t.element._zod.run({value:i,issues:[]},r);a instanceof Promise?s.push(a.then(t=>pc(t,n,e))):pc(a,n,e)}return s.length?Promise.all(s).then(()=>n):n}});function fc(e,t,n,r,o){if(e.issues.length){if(o&&!(n in r))return;t.issues.push(...Si(n,e.issues))}void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function vc(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(r=e.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function _c(e,t,n,r,o,s){const i=[],a=o.keySet,c=o.catchall._zod,u=c.def.type,l="optional"===c.optout;for(const o in t){if(a.has(o))continue;if("never"===u){i.push(o);continue}const s=c.run({value:t[o],issues:[]},r);s instanceof Promise?e.push(s.then(e=>fc(e,n,o,t,l))):fc(s,n,o,t,l)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const gc=Qs("$ZodObject",(e,t)=>{Na.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=ii(()=>vc(t));li(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const o=fi,s=t.catchall;let i;e._zod.parse=(t,n)=>{i??(i=r.value);const a=t.value;if(!o(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};const c=[],u=i.shape;for(const e of i.keys){const r=u[e],o="optional"===r._zod.optout,s=r._zod.run({value:a[e],issues:[]},n);s instanceof Promise?c.push(s.then(n=>fc(n,t,e,a,o))):fc(s,t,e,a,o)}return s?_c(c,a,t,n,r.value,e):c.length?Promise.all(c).then(()=>t):t}}),yc=Qs("$ZodObjectJIT",(e,t)=>{gc.init(e,t);const n=e._zod.parse,r=ii(()=>vc(t));let o;const s=fi,i=!ni.jitless,a=i&&vi.value,c=t.catchall;let u;e._zod.parse=(l,d)=>{u??(u=r.value);const h=l.value;return s(h)?i&&a&&!1===d?.async&&!0!==d.jitless?(o||(o=(e=>{const t=new Ra(["shape","payload","ctx"]),n=r.value,o=e=>{const t=pi(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const s=Object.create(null);let i=0;for(const e of n.keys)s[e]="key_"+i++;t.write("const newResult = {};");for(const r of n.keys){const n=s[r],i=pi(r),a=e[r],c="optional"===a?._zod?.optout;t.write(`const ${n} = ${o(r)};`),c?t.write(`\n        if (${n}.issues.length) {\n          if (${i} in input) {\n            payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n              ...iss,\n              path: iss.path ? [${i}, ...iss.path] : [${i}]\n            })));\n          }\n        }\n        \n        if (${n}.value === undefined) {\n          if (${i} in input) {\n            newResult[${i}] = undefined;\n          }\n        } else {\n          newResult[${i}] = ${n}.value;\n        }\n        \n      `):t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${i}, ...iss.path] : [${i}]\n          })));\n        }\n        \n        if (${n}.value === undefined) {\n          if (${i} in input) {\n            newResult[${i}] = undefined;\n          }\n        } else {\n          newResult[${i}] = ${n}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const a=t.compile();return(t,n)=>a(e,t,n)})(t.shape)),l=o(l,d),c?_c([],h,l,d,u,e):l):n(l,d):(l.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),l)}});function Pc(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;const o=e.filter(e=>!wi(e));return 1===o.length?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>xi(e,r,ri())))}),t)}const Tc=Qs("$ZodUnion",(e,t)=>{Na.init(e,t),li(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),li(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),li(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),li(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>ci(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let i=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:o.value,issues:[]},s);if(t instanceof Promise)a.push(t),i=!0;else{if(0===t.issues.length)return t;a.push(t)}}return i?Promise.all(a).then(t=>Pc(t,o,e,s)):Pc(a,o,e,s)}}),Ec=Qs("$ZodIntersection",(e,t)=>{Na.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,o=t.left._zod.run({value:r,issues:[]},n),s=t.right._zod.run({value:r,issues:[]},n);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([t,n])=>wc(e,t,n)):wc(e,o,s)}});function bc(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(_i(e)&&_i(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),o={...e,...t};for(const n of r){const r=bc(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};o[n]=r.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=bc(e[r],t[r]);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function wc(e,t,n){const r=new Map;let o;for(const n of t.issues)if("unrecognized_keys"===n.code){o??(o=n);for(const e of n.keys)r.has(e)||r.set(e,{}),r.get(e).l=!0}else e.issues.push(n);for(const t of n.issues)if("unrecognized_keys"===t.code)for(const e of t.keys)r.has(e)||r.set(e,{}),r.get(e).r=!0;else e.issues.push(t);const s=[...r].filter(([,e])=>e.l&&e.r).map(([e])=>e);if(s.length&&o&&e.issues.push({...o,keys:s}),wi(e))return e;const i=bc(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Sc=Qs("$ZodEnum",(e,t)=>{Na.init(e,t);const n=oi(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>yi.has(typeof e)).map(e=>"string"==typeof e?Pi(e):e.toString()).join("|")})$`),e._zod.parse=(t,o)=>{const s=t.value;return r.has(s)||t.issues.push({code:"invalid_value",values:n,input:s,inst:e}),t}}),Oc=Qs("$ZodTransform",(e,t)=>{Na.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new ti(e.constructor.name);const o=t.transform(n.value,n);if(r.async){return(o instanceof Promise?o:Promise.resolve(o)).then(e=>(n.value=e,n))}if(o instanceof Promise)throw new ei;return n.value=o,n}});function xc(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const kc=Qs("$ZodOptional",(e,t)=>{Na.init(e,t),e._zod.optin="optional",e._zod.optout="optional",li(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),li(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${ci(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>xc(t,e.value)):xc(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),zc=Qs("$ZodExactOptional",(e,t)=>{kc.init(e,t),li(e._zod,"values",()=>t.innerType._zod.values),li(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(e,n)=>t.innerType._zod.run(e,n)}),Ac=Qs("$ZodNullable",(e,t)=>{Na.init(e,t),li(e._zod,"optin",()=>t.innerType._zod.optin),li(e._zod,"optout",()=>t.innerType._zod.optout),li(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${ci(e.source)}|null)$`):void 0}),li(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),Cc=Qs("$ZodDefault",(e,t)=>{Na.init(e,t),e._zod.optin="optional",li(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>Ic(e,t)):Ic(r,t)}});function Ic(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Gc=Qs("$ZodPrefault",(e,t)=>{Na.init(e,t),e._zod.optin="optional",li(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Rc=Qs("$ZodNonOptional",(e,t)=>{Na.init(e,t),li(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(t=>$c(t,e)):$c(o,e)}});function $c(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Nc=Qs("$ZodCatch",(e,t)=>{Na.init(e,t),li(e._zod,"optin",()=>t.innerType._zod.optin),li(e._zod,"optout",()=>t.innerType._zod.optout),li(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>xi(e,n,ri()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>xi(e,n,ri()))},input:e.value}),e.issues=[]),e)}}),jc=Qs("$ZodPipe",(e,t)=>{Na.init(e,t),li(e._zod,"values",()=>t.in._zod.values),li(e._zod,"optin",()=>t.in._zod.optin),li(e._zod,"optout",()=>t.out._zod.optout),li(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Dc(e,t.in,n)):Dc(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Dc(e,t.out,n)):Dc(r,t.out,n)}});function Dc(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const qc=Qs("$ZodReadonly",(e,t)=>{Na.init(e,t),li(e._zod,"propValues",()=>t.innerType._zod.propValues),li(e._zod,"values",()=>t.innerType._zod.values),li(e._zod,"optin",()=>t.innerType?._zod?.optin),li(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Fc):Fc(r)}});function Fc(e){return e.value=Object.freeze(e.value),e}const Mc=Qs("$ZodCustom",(e,t)=>{_a.init(e,t),Na.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(t=>Uc(t,n,r,e));Uc(o,n,r,e)}});function Uc(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(zi(e))}}var Zc;class Lc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];return this._map.set(e,n),n&&"object"==typeof n&&"id"in n&&this._idmap.set(n.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}(Zc=globalThis).__zod_globalRegistry??(Zc.__zod_globalRegistry=new Lc);const Hc=globalThis.__zod_globalRegistry;function Jc(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ei(t)})}function Vc(e,t){return new ya({check:"less_than",...Ei(t),value:e,inclusive:!1})}function Bc(e,t){return new ya({check:"less_than",...Ei(t),value:e,inclusive:!0})}function Kc(e,t){return new Pa({check:"greater_than",...Ei(t),value:e,inclusive:!1})}function Wc(e,t){return new Pa({check:"greater_than",...Ei(t),value:e,inclusive:!0})}function Yc(e,t){return new Ta({check:"multiple_of",...Ei(t),value:e})}function Xc(e,t){return new ba({check:"max_length",...Ei(t),maximum:e})}function Qc(e,t){return new wa({check:"min_length",...Ei(t),minimum:e})}function eu(e,t){return new Sa({check:"length_equals",...Ei(t),length:e})}function tu(e){return new Ga({check:"overwrite",tx:e})}function nu(e){const t=function(e,t){const n=new _a({check:"custom",...Ei(t)});return n._zod.check=e,n}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(zi(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(zi(r))}},e(n.value,n)));return t}function ru(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Hc,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function ou(e,t,n={path:[],schemaPath:[]}){var r;const o=e._zod.def,s=t.seen.get(e);if(s){s.count++;return n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema}const i={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,i);const a=e._zod.toJSONSchema?.();if(a)i.schema=a;else{const r={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,r);else{const n=i.schema,s=t.processors[o.type];if(!s)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${o.type}`);s(e,t,n,r)}const s=e._zod.parent;s&&(i.ref||(i.ref=s),ou(s,t,r),t.seen.get(s).isParent=!0)}const c=t.metadataRegistry.get(e);c&&Object.assign(i.schema,c),"input"===t.io&&au(e)&&(delete i.schema.examples,delete i.schema.default),"input"===t.io&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault;return t.seen.get(e).schema}function su(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const t of e.seen.entries()){const n=e.metadataRegistry.get(t[0])?.id;if(n){const e=r.get(n);if(e&&e!==t[0])throw new Error(`Duplicate schema id "${n}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(n,t[0])}}const o=t=>{if(t[1].schema.$ref)return;const r=t[1],{ref:o,defId:s}=(t=>{const r="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){const n=e.external.registry.get(t[0])?.id,o=e.external.uri??(e=>e);if(n)return{ref:o(n)};const s=t[1].defId??t[1].schema.id??"schema"+e.counter++;return t[1].defId=s,{defId:s,ref:`${o("__shared")}#/${r}/${s}`}}if(t[1]===n)return{ref:"#"};const o=`#/${r}/`,s=t[1].schema.id??"__schema"+e.counter++;return{defId:s,ref:o+s}})(t);r.def={...r.schema},s&&(r.defId=s);const i=r.schema;for(const e in i)delete i[e];i.$ref=o};if("throw"===e.cycles)for(const t of e.seen.entries()){const e=t[1];if(e.cycle)throw new Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const n of e.seen.entries()){const r=n[1];if(t===n[0]){o(n);continue}if(e.external){const r=e.external.registry.get(n[0])?.id;if(t!==n[0]&&r){o(n);continue}}const s=e.metadataRegistry.get(n[0])?.id;s?o(n):(r.cycle||r.count>1&&"ref"===e.reused)&&o(n)}}function iu(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=t=>{const n=e.seen.get(t);if(null===n.ref)return;const o=n.def??n.schema,s={...o},i=n.ref;if(n.ref=null,i){r(i);const n=e.seen.get(i),a=n.schema;!a.$ref||"draft-07"!==e.target&&"draft-04"!==e.target&&"openapi-3.0"!==e.target?Object.assign(o,a):(o.allOf=o.allOf??[],o.allOf.push(a)),Object.assign(o,s);if(t._zod.parent===i)for(const e in o)"$ref"!==e&&"allOf"!==e&&(e in s||delete o[e]);if(a.$ref&&n.def)for(const e in o)"$ref"!==e&&"allOf"!==e&&e in n.def&&JSON.stringify(o[e])===JSON.stringify(n.def[e])&&delete o[e]}const a=t._zod.parent;if(a&&a!==i){r(a);const t=e.seen.get(a);if(t?.schema.$ref&&(o.$ref=t.schema.$ref,t.def))for(const e in o)"$ref"!==e&&"allOf"!==e&&e in t.def&&JSON.stringify(o[e])===JSON.stringify(t.def[e])&&delete o[e]}e.override({zodSchema:t,jsonSchema:o,path:n.path??[]})};for(const t of[...e.seen.entries()].reverse())r(t[0]);const o={};if("draft-2020-12"===e.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?o.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?o.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const n=e.external.registry.get(t)?.id;if(!n)throw new Error("Schema is missing an `id` property");o.$id=e.external.uri(n)}Object.assign(o,n.def??n.schema);const s=e.external?.defs??{};for(const t of e.seen.entries()){const e=t[1];e.def&&e.defId&&(s[e.defId]=e.def)}e.external||Object.keys(s).length>0&&("draft-2020-12"===e.target?o.$defs=s:o.definitions=s);try{const n=JSON.parse(JSON.stringify(o));return Object.defineProperty(n,"~standard",{value:{...t["~standard"],jsonSchema:{input:cu(t,"input",e.processors),output:cu(t,"output",e.processors)}},enumerable:!1,writable:!1}),n}catch(e){throw new Error("Error converting schema to JSON.")}}function au(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if("transform"===r.type)return!0;if("array"===r.type)return au(r.element,n);if("set"===r.type)return au(r.valueType,n);if("lazy"===r.type)return au(r.getter(),n);if("promise"===r.type||"optional"===r.type||"nonoptional"===r.type||"nullable"===r.type||"readonly"===r.type||"default"===r.type||"prefault"===r.type)return au(r.innerType,n);if("intersection"===r.type)return au(r.left,n)||au(r.right,n);if("record"===r.type||"map"===r.type)return au(r.keyType,n)||au(r.valueType,n);if("pipe"===r.type)return au(r.in,n)||au(r.out,n);if("object"===r.type){for(const e in r.shape)if(au(r.shape[e],n))return!0;return!1}if("union"===r.type){for(const e of r.options)if(au(e,n))return!0;return!1}if("tuple"===r.type){for(const e of r.items)if(au(e,n))return!0;return!(!r.rest||!au(r.rest,n))}return!1}const cu=(e,t,n={})=>r=>{const{libraryOptions:o,target:s}=r??{},i=ru({...o??{},target:s,io:t,processors:n});return ou(e,i),su(i,e),iu(i,e)},uu={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},lu=(e,t,n,r)=>{const o=e._zod.def;ou(o.innerType,t,r);t.seen.get(e).ref=o.innerType},du=Qs("ZodISODateTime",(e,t)=>{Wa.init(e,t),Nu.init(e,t)});function hu(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ei(t)})}(du,e)}const pu=Qs("ZodISODate",(e,t)=>{Ya.init(e,t),Nu.init(e,t)});function mu(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...Ei(t)})}(pu,e)}const fu=Qs("ZodISOTime",(e,t)=>{Xa.init(e,t),Nu.init(e,t)});function vu(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ei(t)})}(fu,e)}const _u=Qs("ZodISODuration",(e,t)=>{Qa.init(e,t),Nu.init(e,t)});function gu(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...Ei(t)})}(_u,e)}const yu=Qs("ZodError",(e,t)=>{Ci.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t=e=>e.message){const n={_errors:[]},r=e=>{for(const o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>r({issues:e}));else if("invalid_key"===o.code)r({issues:o.issues});else if("invalid_element"===o.code)r({issues:o.issues});else if(0===o.path.length)n._errors.push(t(o));else{let e=n,r=0;for(;r<o.path.length;){const n=o.path[r];r===o.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(o))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(e),n}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,si,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,si,2)}},isEmpty:{get:()=>0===e.issues.length}})},{Parent:Error}),Pu=Gi(yu),Tu=Ri(yu),Eu=$i(yu),bu=ji(yu),wu=qi(yu),Su=Fi(yu),Ou=Mi(yu),xu=Ui(yu),ku=Zi(yu),zu=Li(yu),Au=Hi(yu),Cu=Ji(yu),Iu=Qs("ZodType",(e,t)=>(Na.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:cu(e,"input"),output:cu(e,"output")}}),e.toJSONSchema=((e,t={})=>n=>{const r=ru({...n,processors:t});return ou(e,r),su(r,e),iu(r,e)})(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(hi(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),e.with=e.check,e.clone=(t,n)=>Ti(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>Pu(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>Eu(e,t,n),e.parseAsync=async(t,n)=>Tu(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>bu(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>wu(e,t,n),e.decode=(t,n)=>Su(e,t,n),e.encodeAsync=async(t,n)=>Ou(e,t,n),e.decodeAsync=async(t,n)=>xu(e,t,n),e.safeEncode=(t,n)=>ku(e,t,n),e.safeDecode=(t,n)=>zu(e,t,n),e.safeEncodeAsync=async(t,n)=>Au(e,t,n),e.safeDecodeAsync=async(t,n)=>Cu(e,t,n),e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...Ei(n)})}(zl,e,t)}(t,n)),e.superRefine=t=>e.check(nu(t)),e.overwrite=t=>e.check(tu(t)),e.optional=()=>gl(e),e.exactOptional=()=>new yl({type:"optional",innerType:e}),e.nullable=()=>Tl(e),e.nullish=()=>gl(Tl(e)),e.nonoptional=t=>function(e,t){return new wl({type:"nonoptional",innerType:e,...Ei(t)})}(e,t),e.array=()=>{return function(e,t,n){return new e({type:"array",element:t,...Ei(n)})}(ll,e,t);var t},e.or=t=>pl([e,t]),e.and=t=>new ml({type:"intersection",left:e,right:t}),e.transform=t=>xl(e,new vl({type:"transform",transform:t})),e.default=t=>{return n=t,new El({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():gi(n)}});var n},e.prefault=t=>{return n=t,new bl({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():gi(n)}});var n},e.catch=t=>{return new Sl({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>xl(e,t),e.readonly=()=>new kl({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return Hc.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>Hc.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Hc.get(e);const n=e.clone();return Hc.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=t=>t(e),e)),Gu=Qs("_ZodString",(e,t)=>{ja.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n)=>{const r=n;r.type="string";const{minimum:o,maximum:s,format:i,patterns:a,contentEncoding:c}=e._zod.bag;if("number"==typeof o&&(r.minLength=o),"number"==typeof s&&(r.maxLength=s),i&&(r.format=uu[i]??i,""===r.format&&delete r.format,"time"===i&&delete r.format),c&&(r.contentEncoding=c),a&&a.size>0){const e=[...a];1===e.length?r.pattern=e[0].source:e.length>1&&(r.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}})(e,t,n);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new xa({check:"string_format",format:"regex",...Ei(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new Aa({check:"string_format",format:"includes",...Ei(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new Ca({check:"string_format",format:"starts_with",...Ei(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Ia({check:"string_format",format:"ends_with",...Ei(t),suffix:e})}(...t)),e.min=(...t)=>e.check(Qc(...t)),e.max=(...t)=>e.check(Xc(...t)),e.length=(...t)=>e.check(eu(...t)),e.nonempty=(...t)=>e.check(Qc(1,...t)),e.lowercase=t=>e.check(function(e){return new ka({check:"string_format",format:"lowercase",...Ei(e)})}(t)),e.uppercase=t=>e.check(function(e){return new za({check:"string_format",format:"uppercase",...Ei(e)})}(t)),e.trim=()=>e.check(tu(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return tu(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(tu(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(tu(e=>e.toUpperCase())),e.slugify=()=>e.check(tu(e=>function(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}(e)))}),Ru=Qs("ZodString",(e,t)=>{ja.init(e,t),Gu.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ei(t)})}(ju,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ei(t)})}(Fu,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ei(t)})}(tl,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ei(t)})}(Mu,t)),e.guid=t=>e.check(Jc(Du,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ei(t)})}(qu,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ei(t)})}(qu,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ei(t)})}(qu,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ei(t)})}(qu,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ei(t)})}(Uu,t)),e.guid=t=>e.check(Jc(Du,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ei(t)})}(Zu,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ei(t)})}(Lu,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ei(t)})}(Hu,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ei(t)})}(Xu,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ei(t)})}(Qu,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ei(t)})}(Ju,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ei(t)})}(Vu,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ei(t)})}(Bu,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ei(t)})}(Ku,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ei(t)})}(Wu,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ei(t)})}(Yu,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ei(t)})}(el,t)),e.datetime=t=>e.check(hu(t)),e.date=t=>e.check(mu(t)),e.time=t=>e.check(vu(t)),e.duration=t=>e.check(gu(t))});function $u(e){return function(e,t){return new e({type:"string",...Ei(t)})}(Ru,e)}const Nu=Qs("ZodStringFormat",(e,t)=>{Da.init(e,t),Gu.init(e,t)}),ju=Qs("ZodEmail",(e,t)=>{Ma.init(e,t),Nu.init(e,t)}),Du=Qs("ZodGUID",(e,t)=>{qa.init(e,t),Nu.init(e,t)}),qu=Qs("ZodUUID",(e,t)=>{Fa.init(e,t),Nu.init(e,t)}),Fu=Qs("ZodURL",(e,t)=>{Ua.init(e,t),Nu.init(e,t)}),Mu=Qs("ZodEmoji",(e,t)=>{Za.init(e,t),Nu.init(e,t)}),Uu=Qs("ZodNanoID",(e,t)=>{La.init(e,t),Nu.init(e,t)}),Zu=Qs("ZodCUID",(e,t)=>{Ha.init(e,t),Nu.init(e,t)}),Lu=Qs("ZodCUID2",(e,t)=>{Ja.init(e,t),Nu.init(e,t)}),Hu=Qs("ZodULID",(e,t)=>{Va.init(e,t),Nu.init(e,t)}),Ju=Qs("ZodXID",(e,t)=>{Ba.init(e,t),Nu.init(e,t)}),Vu=Qs("ZodKSUID",(e,t)=>{Ka.init(e,t),Nu.init(e,t)}),Bu=Qs("ZodIPv4",(e,t)=>{ec.init(e,t),Nu.init(e,t)}),Ku=Qs("ZodIPv6",(e,t)=>{tc.init(e,t),Nu.init(e,t)}),Wu=Qs("ZodCIDRv4",(e,t)=>{nc.init(e,t),Nu.init(e,t)}),Yu=Qs("ZodCIDRv6",(e,t)=>{rc.init(e,t),Nu.init(e,t)}),Xu=Qs("ZodBase64",(e,t)=>{sc.init(e,t),Nu.init(e,t)}),Qu=Qs("ZodBase64URL",(e,t)=>{ic.init(e,t),Nu.init(e,t)}),el=Qs("ZodE164",(e,t)=>{ac.init(e,t),Nu.init(e,t)}),tl=Qs("ZodJWT",(e,t)=>{cc.init(e,t),Nu.init(e,t)}),nl=Qs("ZodNumber",(e,t)=>{uc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n)=>{const r=n,{minimum:o,maximum:s,format:i,multipleOf:a,exclusiveMaximum:c,exclusiveMinimum:u}=e._zod.bag;"string"==typeof i&&i.includes("int")?r.type="integer":r.type="number","number"==typeof u&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.minimum=u,r.exclusiveMinimum=!0):r.exclusiveMinimum=u),"number"==typeof o&&(r.minimum=o,"number"==typeof u&&"draft-04"!==t.target&&(u>=o?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof c&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.maximum=c,r.exclusiveMaximum=!0):r.exclusiveMaximum=c),"number"==typeof s&&(r.maximum=s,"number"==typeof c&&"draft-04"!==t.target&&(c<=s?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof a&&(r.multipleOf=a)})(e,t,n),e.gt=(t,n)=>e.check(Kc(t,n)),e.gte=(t,n)=>e.check(Wc(t,n)),e.min=(t,n)=>e.check(Wc(t,n)),e.lt=(t,n)=>e.check(Vc(t,n)),e.lte=(t,n)=>e.check(Bc(t,n)),e.max=(t,n)=>e.check(Bc(t,n)),e.int=t=>e.check(sl(t)),e.safe=t=>e.check(sl(t)),e.positive=t=>e.check(Kc(0,t)),e.nonnegative=t=>e.check(Wc(0,t)),e.negative=t=>e.check(Vc(0,t)),e.nonpositive=t=>e.check(Bc(0,t)),e.multipleOf=(t,n)=>e.check(Yc(t,n)),e.step=(t,n)=>e.check(Yc(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function rl(e){return function(e,t){return new e({type:"number",checks:[],...Ei(t)})}(nl,e)}const ol=Qs("ZodNumberFormat",(e,t)=>{lc.init(e,t),nl.init(e,t)});function sl(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Ei(t)})}(ol,e)}const il=Qs("ZodUnknown",(e,t)=>{dc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(e,t,n)=>{}});function al(){return new il({type:"unknown"})}const cl=Qs("ZodNever",(e,t)=>{hc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(e,t,n)=>((e,t,n)=>{n.not={}})(0,0,t)});function ul(e){return function(e,t){return new e({type:"never",...Ei(t)})}(cl,e)}const ll=Qs("ZodArray",(e,t)=>{mc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=n,s=e._zod.def,{minimum:i,maximum:a}=e._zod.bag;"number"==typeof i&&(o.minItems=i),"number"==typeof a&&(o.maxItems=a),o.type="array",o.items=ou(s.element,t,{...r,path:[...r.path,"items"]})})(e,t,n,r),e.element=t.element,e.min=(t,n)=>e.check(Qc(t,n)),e.nonempty=t=>e.check(Qc(1,t)),e.max=(t,n)=>e.check(Xc(t,n)),e.length=(t,n)=>e.check(eu(t,n)),e.unwrap=()=>e.element});const dl=Qs("ZodObject",(e,t)=>{yc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object",o.properties={};const i=s.shape;for(const e in i)o.properties[e]=ou(i[e],t,{...r,path:[...r.path,"properties",e]});const a=new Set(Object.keys(i)),c=new Set([...a].filter(e=>{const n=s.shape[e]._zod;return"input"===t.io?void 0===n.optin:void 0===n.optout}));c.size>0&&(o.required=Array.from(c)),"never"===s.catchall?._zod.def.type?o.additionalProperties=!1:s.catchall?s.catchall&&(o.additionalProperties=ou(s.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):"output"===t.io&&(o.additionalProperties=!1)})(e,t,n,r),li(e,"shape",()=>t.shape),e.keyof=()=>function(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new fl({type:"enum",entries:n,...Ei(t)})}(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:al()}),e.loose=()=>e.clone({...e._zod.def,catchall:al()}),e.strict=()=>e.clone({...e._zod.def,catchall:ul()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!_i(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const n=e._zod.def.shape;for(const e in t)if(void 0!==Object.getOwnPropertyDescriptor(n,e))throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=hi(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return di(this,"shape",n),n}});return Ti(e,r)}(e,t),e.safeExtend=t=>function(e,t){if(!_i(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=hi(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return di(this,"shape",n),n}});return Ti(e,n)}(e,t),e.merge=t=>function(e,t){const n=hi(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return di(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Ti(e,n)}(e,t),e.pick=t=>function(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");return Ti(e,hi(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return di(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=hi(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return di(this,"shape",r),r},checks:[]});return Ti(e,o)}(e,t),e.partial=(...t)=>function(e,t,n){const r=t._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=hi(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)o[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return di(this,"shape",o),o},checks:[]});return Ti(t,o)}(_l,e,t[0]),e.required=(...t)=>function(e,t,n){const r=hi(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const t in n){if(!(t in o))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)o[t]=new e({type:"nonoptional",innerType:r[t]});return di(this,"shape",o),o}});return Ti(t,r)}(wl,e,t[0])});const hl=Qs("ZodUnion",(e,t)=>{Tc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def,s=!1===o.inclusive,i=o.options.map((e,n)=>ou(e,t,{...r,path:[...r.path,s?"oneOf":"anyOf",n]}));s?n.oneOf=i:n.anyOf=i})(e,t,n,r),e.options=t.options});function pl(e,t){return new hl({type:"union",options:e,...Ei(t)})}const ml=Qs("ZodIntersection",(e,t)=>{Ec.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def,s=ou(o.left,t,{...r,path:[...r.path,"allOf",0]}),i=ou(o.right,t,{...r,path:[...r.path,"allOf",1]}),a=e=>"allOf"in e&&1===Object.keys(e).length,c=[...a(s)?s.allOf:[s],...a(i)?i.allOf:[i]];n.allOf=c})(e,t,n,r)});const fl=Qs("ZodEnum",(e,t)=>{Sc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n)=>{const r=oi(e._zod.def.entries);r.every(e=>"number"==typeof e)&&(n.type="number"),r.every(e=>"string"==typeof e)&&(n.type="string"),n.enum=r})(e,0,n),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const o={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);o[r]=t.entries[r]}return new fl({...t,checks:[],...Ei(r),entries:o})},e.exclude=(e,r)=>{const o={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete o[t]}return new fl({...t,checks:[],...Ei(r),entries:o})}});const vl=Qs("ZodTransform",(e,t)=>{Oc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(e,t,n)=>((e,t)=>{if("throw"===t.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema")})(0,e),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new ti(e.constructor.name);n.addIssue=r=>{if("string"==typeof r)n.issues.push(zi(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(zi(t))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(e=>(n.value=e,n)):(n.value=o,n)}});const _l=Qs("ZodOptional",(e,t)=>{kc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>lu(e,t,0,r),e.unwrap=()=>e._zod.def.innerType});function gl(e){return new _l({type:"optional",innerType:e})}const yl=Qs("ZodExactOptional",(e,t)=>{zc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>lu(e,t,0,r),e.unwrap=()=>e._zod.def.innerType});const Pl=Qs("ZodNullable",(e,t)=>{Ac.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def,s=ou(o.innerType,t,r),i=t.seen.get(e);"openapi-3.0"===t.target?(i.ref=o.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]})(e,t,n,r),e.unwrap=()=>e._zod.def.innerType});function Tl(e){return new Pl({type:"nullable",innerType:e})}const El=Qs("ZodDefault",(e,t)=>{Cc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def;ou(o.innerType,t,r),t.seen.get(e).ref=o.innerType,n.default=JSON.parse(JSON.stringify(o.defaultValue))})(e,t,n,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const bl=Qs("ZodPrefault",(e,t)=>{Gc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def;ou(o.innerType,t,r),t.seen.get(e).ref=o.innerType,"input"===t.io&&(n._prefault=JSON.parse(JSON.stringify(o.defaultValue)))})(e,t,n,r),e.unwrap=()=>e._zod.def.innerType});const wl=Qs("ZodNonOptional",(e,t)=>{Rc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def;ou(o.innerType,t,r),t.seen.get(e).ref=o.innerType})(e,t,0,r),e.unwrap=()=>e._zod.def.innerType});const Sl=Qs("ZodCatch",(e,t)=>{Nc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def;let s;ou(o.innerType,t,r),t.seen.get(e).ref=o.innerType;try{s=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=s})(e,t,n,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const Ol=Qs("ZodPipe",(e,t)=>{jc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def,s="input"===t.io?"transform"===o.in._zod.def.type?o.out:o.in:o.out;ou(s,t,r),t.seen.get(e).ref=s})(e,t,0,r),e.in=t.in,e.out=t.out});function xl(e,t){return new Ol({type:"pipe",in:e,out:t})}const kl=Qs("ZodReadonly",(e,t)=>{qc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(t,n,r)=>((e,t,n,r)=>{const o=e._zod.def;ou(o.innerType,t,r),t.seen.get(e).ref=o.innerType,n.readOnly=!0})(e,t,n,r),e.unwrap=()=>e._zod.def.innerType});const zl=Qs("ZodCustom",(e,t)=>{Mc.init(e,t),Iu.init(e,t),e._zod.processJSONSchema=(e,t,n)=>((e,t)=>{if("throw"===t.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")})(0,e)});class Al extends Error{}class Cl extends Error{}class Il extends Error{}var Gl=(e,{services:t,database:n,getSchema:r})=>{const{ItemsService:o}=t;console.log(" Endpoint /pagos registrado correctamente");const s=function(e,t){const n={type:"object",shape:e??{},...Ei(t)};return new dl(n)}({venta_id:pl([$u(),rl()]).optional(),numero_pago:rl().int().positive().optional(),pago_id:pl([$u(),rl()]).optional(),cliente_id:pl([$u(),rl()])}).refine(e=>e.venta_id&&e.numero_pago||e.pago_id,{message:"Debe proporcionar pago_id O (venta_id Y numero_pago)"}),i=new Map,a=new Map;e.use((e,t,n)=>{const r=e.ip||e.connection.remoteAddress,o=Date.now();i.has(r)||i.set(r,[]);const s=i.get(r).filter(e=>o-e<6e4);if(s.length>=100)return console.warn(` Global Rate limit exceeded for IP ${r}`),t.status(429).json({errors:[{message:"Too many requests",code:"RATE_LIMIT_EXCEEDED"}]});s.push(o),i.set(r,s),n()}),e.get("/",async(e,t)=>{try{const n=await r(),s=new o("pagos",{schema:n,accountability:e.accountability}),{estatus:i,fecha_vencimiento:a,venta_id:c,limit:u,page:l,sort:d}=e.query,h={_and:[]};i&&h._and.push({estatus:{_eq:i}}),a&&h._and.push({fecha_vencimiento:{_eq:a}}),c&&h._and.push({venta_id:{_eq:c}});const p=await s.readByQuery({filter:h._and.length>0?h:{},limit:u?parseInt(u):20,page:l?parseInt(l):1,sort:d||["fecha_vencimiento"],fields:["*","venta_id.id","venta_id.cliente_id.nombre","venta_id.cliente_id.apellido"]});t.json({data:p})}catch(e){return console.error(" Error en GET /pagos:",e),t.status(500).json({errors:[{message:e.message}]})}}),e.get("/:id",async(e,t)=>{try{const{id:n}=e.params,s=await r(),i=new o("pagos",{schema:s,accountability:e.accountability}),a=await i.readOne(n,{fields:["*","venta_id.*","venta_id.cliente_id.*","venta_id.lote_id.*"]});if(!a)throw new Il(`Pago ${n} no encontrado`);t.json({data:a})}catch(n){return console.error(` Error en GET /pagos/${e.params.id}:`,n),n instanceof Il?t.status(404).json({errors:[{message:n.message}]}):t.status(500).json({errors:[{message:n.message}]})}}),e.post("/",async(e,t)=>{let s;try{const{venta_id:i,pago_id:a,monto:c,fecha_pago:u,metodo_pago:l,referencia:d,notas:h}=e.body;if(!c||c<=0)throw new Cl("El monto debe ser positivo");if(!i&&!a)throw new Cl("Debe especificar venta_id o pago_id");const p=await r(),m=(new o("ventas",{schema:p,accountability:e.accountability}),new o("pagos",{schema:p,accountability:e.accountability}));let f;if(s=await n.transaction(),a){if(f=await s("pagos").where({id:a}).first(),!f)throw new Il("Pago no encontrado");if(i&&f.venta_id!==i)throw new Cl("El pago no pertenece a la venta especificada")}else if(f=await s("pagos").where({venta_id:i,estatus:"pendiente"}).orderBy("fecha_vencimiento","asc").first(),f||(f=await s("pagos").where({venta_id:i,estatus:"atrasado"}).orderBy("fecha_vencimiento","asc").first()),!f)throw new Cl("No se encontraron pagos pendientes para esta venta");const v=parseFloat(f.monto),_=parseFloat(f.monto_pagado||0),g=v-_;if(c>g+.01)throw new Cl(`El monto (${c}) excede el saldo pendiente del pago (${g})`);const y=new Date(u||new Date),P=new Date(f.fecha_vencimiento);let T=parseFloat(f.mora||0);if(y>P&&0===T){T=v*.05}const E=_+parseFloat(c);let b=f.estatus;if(E>=v-.01&&(b="pagado"),await s("pagos").where({id:f.id}).update({monto_pagado:E,fecha_pago:y,estatus:b,mora:T,metodo_pago:l||f.metodo_pago,referencia:d||f.referencia,notas:h?f.notas?f.notas+"\n"+h:h:f.notas}),"pagado"===b){0==(await s("pagos").where({venta_id:f.venta_id}).whereNotIn("estatus",["pagado","cancelado"]).whereNot({id:f.id}).count("id as count").first()).count&&await s("ventas").where({id:f.venta_id}).update({estatus:"liquidado"})}await s.commit();const w=await m.readOne(f.id);t.json({data:w,meta:{message:"Pago registrado exitosamente",saldo_restante_pago:Math.max(0,v-E),mora_aplicada:T>(f.mora||0),receipt_url:`/assets/receipts/placeholder-${f.id}.pdf`}})}catch(e){return s&&await s.rollback(),console.error(" Error en POST /pagos:",e),e instanceof Cl||e instanceof Il?t.status(400).json({errors:[{message:e.message}]}):t.status(500).json({errors:[{message:e.message}]})}}),e.post("/create-payment-intent",async(e,t)=>{try{const n=e.ip||e.connection.remoteAddress,i=Date.now();a.has(n)||a.set(n,[]);const c=a.get(n).filter(e=>i-e<6e4);if(c.length>=5)return console.warn(` PaymentIntent Rate limit exceeded for IP ${n}`),t.status(429).json({errors:[{message:"Too many payment attempts, please try again later.",code:"RATE_LIMIT_EXCEEDED"}]});c.push(i),a.set(n,c);const u=s.safeParse(e.body);if(!u.success)throw new Cl(u.error.issues.map(e=>e.message).join(", "));const{venta_id:l,numero_pago:d,pago_id:h,cliente_id:p}=u.data,m=await r(),f=new o("pagos",{schema:m,accountability:e.accountability}),v=(new o("ventas",{schema:m,accountability:e.accountability}),new o("clientes",{schema:m,accountability:e.accountability}));let _;if(h)_=await f.readOne(h,{fields:["*","venta_id.*"]});else{_=(await f.readByQuery({filter:{venta_id:{_eq:l},numero_pago:{_eq:d}},limit:1,fields:["*","venta_id.*"]}))[0]}if(!_)throw new Il("Pago no encontrado");if(_.venta_id.cliente_id!==p)throw new Al("La venta no pertenece al cliente especificado");if(["pagado","liquidado"].includes(_.estatus))return t.status(409).json({errors:[{message:"El pago ya ha sido procesado",code:"PAYMENT_ALREADY_PROCESSED"}]});const g=await v.readOne(p);if(!g)throw new Il("Cliente no encontrado");let y=g.stripe_customer_id;if(!y){const e=await(async e=>{const t=Xs(),{email:n,nombre:r,id:o,metadata:s={}}=e;try{const e=await t.customers.list({email:n,limit:1});return e.data.length>0?e.data[0]:await t.customers.create({email:n,name:r,metadata:{...s,crm_cliente_id:String(o)}})}catch(e){throw console.error("Error managing Stripe customer:",e),e}})({email:g.email,nombre:`${g.nombre} ${g.apellido_paterno||""}`.trim(),id:g.id,metadata:{rfc:g.rfc,telefono:g.telefono}});y=e.id,await v.updateOne(p,{stripe_customer_id:y})}const P=parseFloat(_.monto),T=parseFloat(_.mora||0),E=P+T-parseFloat(_.monto_pagado||0);if(E<=0)throw new Cl("El monto a pagar debe ser mayor a 0");const b=await(async(e,t="mxn",n={},r=null)=>{const o=Xs();try{const s={amount:Math.round(100*e),currency:t,automatic_payment_methods:{enabled:!0},metadata:n};return r&&(s.customer=r),await o.paymentIntents.create(s)}catch(e){throw console.error("Error creating payment intent:",e),e}})(E,"mxn",{venta_id:_.venta_id.id,numero_pago:_.numero_pago,pago_id:_.id,cliente_id:p,description:`Pago #${_.numero_pago} - Venta ${_.venta_id.id} - Lote ${_.venta_id.lote_id}`},y);console.log(` PaymentIntent creado: ${b.id} para Pago ${_.id}`),await f.updateOne(_.id,{stripe_payment_intent_id:b.id,stripe_customer_id:y}),t.json({clientSecret:b.client_secret,paymentIntentId:b.id,amount:E,currency:"mxn"})}catch(e){return console.error(" Error creating payment intent:",e),e instanceof Cl?t.status(400).json({errors:[{message:e.message}]}):e instanceof Il?t.status(404).json({errors:[{message:e.message}]}):e instanceof Al?t.status(403).json({errors:[{message:e.message}]}):t.status(500).json({errors:[{message:e.message}]})}}),e.post("/webhook",async(e,t)=>{const n=e.headers["stripe-signature"],s=process.env.STRIPE_WEBHOOK_SECRET;let i;try{if(s){i=((e,t,n)=>Xs().webhooks.constructEvent(e,t,n))(e.rawBody||e.body,n,s)}else i=e.body,console.warn(" STRIPE_WEBHOOK_SECRET no configurado, saltando verificacin de firma. NO SEGURO PARA PRODUCCIN.")}catch(e){return console.error(` Webhook Error (Firma): ${e.message}`),t.status(400).send(`Webhook Error: ${e.message}`)}console.log(` Evento recibido: ${i.type}`);const a=await r(),c=new o("pagos",{schema:a,accountability:null});try{switch(i.type){case"payment_intent.succeeded":{const e=i.data.object;console.log(` PaymentIntent successful: ${e.id}`);const t=await c.readByQuery({filter:{stripe_payment_intent_id:{_eq:e.id}},limit:1});if(t&&t.length>0){const n=t[0];if("pagado"===n.estatus){console.log(` Pago ${n.id} ya procesado anteriormente. Ignorando evento.`);break}const r=e.charges?.data||[],o=r.length>0?r[0]:null,s=o?.payment_method_details||{},i=s.card?.last4||null;await c.updateOne(n.id,{estatus:"pagado",fecha_pago:new Date,metodo_pago:"tarjeta",metodo_pago_detalle:s,stripe_last4:i,stripe_customer_id:e.customer}),console.log(` Pago ${n.id} actualizado a PAGADO. Last4: ${i}`)}else console.warn(` No se encontr registro de pago para PaymentIntent ${e.id}`);break}case"payment_intent.payment_failed":{const e=i.data.object,t=e.last_payment_error?.message||"Error desconocido";console.error(` PaymentIntent failed: ${e.id} - ${t}`);const n=await c.readByQuery({filter:{stripe_payment_intent_id:{_eq:e.id}},limit:1});if(n&&n.length>0){const e=n[0],r=e.notas||"";await c.updateOne(e.id,{notas:`${r}\n[${(new Date).toISOString()}] Intento de pago fallido: ${t}`})}break}case"invoice.payment_succeeded":{const e=i.data.object;console.log(` Invoice payment succeeded: ${e.id}`);break}case"customer.subscription.created":case"customer.subscription.deleted":{const e=i.data.object;console.log(` Subscription event ${i.type}: ${e.id}`);break}default:console.log(` Unhandled event type: ${i.type}`)}}catch(e){return console.error(" Error updating DB from webhook:",e),t.status(500).send("Database Error")}t.json({received:!0})}),e.patch("/:id",async(e,t)=>{try{const{id:n}=e.params,s=e.body,i=await r(),a=new o("pagos",{schema:i,accountability:e.accountability}),c=await a.readOne(n);if(!c)throw new Il("Pago no encontrado");if("pagado"===c.estatus)throw new Al("No se puede editar un pago ya liquidado. Contacte al administrador.");const u=["fecha_vencimiento","monto","notas","metodo_pago","referencia","concepto"],l={};if(Object.keys(s).forEach(e=>{u.includes(e)&&(l[e]=s[e])}),0===Object.keys(l).length)throw new Cl("No se enviaron campos vlidos para actualizar");await a.updateOne(n,l),t.json({data:{id:n,message:"Pago actualizado"}})}catch(n){return console.error(` Error en PATCH /pagos/${e.params.id}:`,n),n instanceof Al?t.status(403).json({errors:[{message:n.message}]}):n instanceof Il?t.status(404).json({errors:[{message:n.message}]}):t.status(500).json({errors:[{message:n.message}]})}}),e.delete("/:id",async(e,t)=>t.status(403).json({errors:[{message:"La eliminacin de pagos no est permitida para mantener la integridad financiera. Use cancelaciones o notas de crdito.",code:"FORBIDDEN"}]}))};export{Gl as default};
